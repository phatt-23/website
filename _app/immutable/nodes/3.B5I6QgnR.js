import"../chunks/DsnmJJEf.js";import{I as lr,h as ve,e as ur,E as M,a6 as dr,K as cr,L as fr,M as Ot,n as nt,N as at,j as Le,C as vr,aQ as hr,P as ut,R as pr,Q as Te,au as kt,O as Ft,_ as _r,as as Mt,aN as Ht,aI as Gt,a_ as Be,S as zt,T as gr,a$ as Je,b0 as yr,b1 as it,aC as Xt,k as mr,b2 as wr,aM as br,b3 as Cr,g as Sr,q as Ir,b4 as Wt,X as Er,b5 as xr,b6 as vt,V as Or,a0 as kr,b7 as Mr,b8 as Tr,an as $r,A as Ut,W as jt,b9 as Nr,p as Oe,f as Y,s as H,d as L,r as R,b as F,c as ke,ao as $e,a as _e,t as ge,ap as Ve,ba as Ar,w as Ze,am as be,a1 as ce,a7 as Dr,z as ht,bb as Rr,v as Pr,$ as Lr,aq as Tt}from"../chunks/CrNHeh_q.js";import{s as Ce,d as pt,o as Fr,w as Hr,g as $t}from"../chunks/DE1QlgkD.js";import{i as re,p as je,b as Gr,s as zr,a as Xr}from"../chunks/C9uMbrzX.js";import{r as Qe,a as Nt,c as Wr,l as Ur}from"../chunks/Cpp1glqQ.js";import{h as Xe}from"../chunks/DMB1Uyw7.js";function Ne(t,e){return e}function jr(t,e,r){for(var a=t.items,o=[],s=e.length,u=0;u<s;u++)wr(e[u].e,o,!0);var d=s>0&&o.length===0&&r!==null;if(d){var f=r.parentNode;br(f),f.append(r),a.clear(),pe(t,e[0].prev,e[s-1].next)}Cr(o,()=>{for(var h=0;h<s;h++){var p=e[h];d||(a.delete(p.k),pe(t,p.prev,p.next)),Xt(p.e,!d)}})}function Ae(t,e,r,a,o,s=null){var u=t,d={flags:e,items:new Map,first:null},f=(e&Wt)!==0;if(f){var h=t;u=ve?nt(Ir(h)):h.appendChild(Ft())}ve&&ur();var p=null,C=!1,T=new Map,I=dr(()=>{var $=r();return Gt($)?$:$==null?[]:Ht($)}),_,S;function k(){Vr(S,_,d,T,u,o,e,a,r),s!==null&&(_.length===0?p?zt(p):p=ut(()=>s(u)):p!==null&&gr(p,()=>{p=null}))}lr(()=>{S??=Sr,_=M(I);var $=_.length;if(C&&$===0)return;C=$===0;let X=!1;if(ve){var B=cr(u)===fr;B!==($===0)&&(u=Ot(),nt(u),at(!1),X=!0)}if(ve){for(var j=null,G,x=0;x<$;x++){if(Le.nodeType===vr&&Le.data===hr){u=Le,X=!0,at(!1);break}var A=_[x],U=a(A,x);G=dt(Le,d,j,null,A,U,x,o,e,r),d.items.set(U,G),j=G}$>0&&nt(Ot())}if(ve)$===0&&s&&(p=ut(()=>s(u)));else if(pr()){var se=new Set,oe=Te;for(x=0;x<$;x+=1){A=_[x],U=a(A,x);var b=d.items.get(U)??T.get(U);b?(e&(Je|Be))!==0&&Vt(b,A,x,e):(G=dt(null,d,null,null,A,U,x,o,e,r,!0),T.set(U,G)),se.add(U)}for(const[O,P]of d.items)se.has(O)||oe.skipped_effects.add(P.e);oe.add_callback(k)}else k();X&&at(!0),M(I)}),ve&&(u=Le)}function Vr(t,e,r,a,o,s,u,d,f){var h=(u&xr)!==0,p=(u&(Je|Be))!==0,C=e.length,T=r.items,I=r.first,_=I,S,k=null,$,X=[],B=[],j,G,x,A;if(h)for(A=0;A<C;A+=1)j=e[A],G=d(j,A),x=T.get(G),x!==void 0&&(x.a?.measure(),($??=new Set).add(x));for(A=0;A<C;A+=1){if(j=e[A],G=d(j,A),x=T.get(G),x===void 0){var U=a.get(G);if(U!==void 0){a.delete(G),T.set(G,U);var se=k?k.next:_;pe(r,k,U),pe(r,U,se),st(U,se,o),k=U}else{var oe=_?_.e.nodes_start:o;k=dt(oe,r,k,k===null?r.first:k.next,j,G,A,s,u,f)}T.set(G,k),X=[],B=[],_=k.next;continue}if(p&&Vt(x,j,A,u),(x.e.f&it)!==0&&(zt(x.e),h&&(x.a?.unfix(),($??=new Set).delete(x))),x!==_){if(S!==void 0&&S.has(x)){if(X.length<B.length){var b=B[0],O;k=b.prev;var P=X[0],W=X[X.length-1];for(O=0;O<X.length;O+=1)st(X[O],b,o);for(O=0;O<B.length;O+=1)S.delete(B[O]);pe(r,P.prev,W.next),pe(r,k,P),pe(r,W,b),_=b,k=W,A-=1,X=[],B=[]}else S.delete(x),st(x,_,o),pe(r,x.prev,x.next),pe(r,x,k===null?r.first:k.next),pe(r,k,x),k=x;continue}for(X=[],B=[];_!==null&&_.k!==G;)(_.e.f&it)===0&&(S??=new Set).add(_),B.push(_),_=_.next;if(_===null)continue;x=_}X.push(x),k=x,_=x.next}if(_!==null||S!==void 0){for(var ne=S===void 0?[]:Ht(S);_!==null;)(_.e.f&it)===0&&ne.push(_),_=_.next;var ue=ne.length;if(ue>0){var J=(u&Wt)!==0&&C===0?o:null;if(h){for(A=0;A<ue;A+=1)ne[A].a?.measure();for(A=0;A<ue;A+=1)ne[A].a?.fix()}jr(r,ne,J)}}h&&Er(()=>{if($!==void 0)for(x of $)x.a?.apply()}),t.first=r.first&&r.first.e,t.last=k&&k.e;for(var ee of a.values())Xt(ee.e);a.clear()}function Vt(t,e,r,a){(a&Je)!==0&&kt(t.v,e),(a&Be)!==0?kt(t.i,r):t.i=r}function dt(t,e,r,a,o,s,u,d,f,h,p){var C=(f&Je)!==0,T=(f&yr)===0,I=C?T?_r(o,!1,!1):Mt(o):o,_=(f&Be)===0?u:Mt(u),S={i:_,v:I,k:s,a:null,e:null,prev:r,next:a};try{if(t===null){var k=document.createDocumentFragment();k.append(t=Ft())}return S.e=ut(()=>d(t,I,_,h),ve),S.e.prev=r&&r.e,S.e.next=a&&a.e,r===null?p||(e.first=S):(r.next=S,r.e.next=S.e),a!==null&&(a.prev=S,a.e.prev=S.e),S}finally{}}function st(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,o=e?e.e.nodes_start:r,s=t.e.nodes_start;s!==null&&s!==a;){var u=mr(s);o.before(s),s=u}}function pe(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Yr(t,e){return t==null?null:String(t)}function qr(t,e,r,a){var o=t.__style;if(ve||o!==e){var s=Yr(e);(!ve||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}return a}function Yt(t,e,r=!1){if(t.multiple){if(e==null)return;if(!Gt(e))return Mr();for(var a of t.options)a.selected=e.includes(Ge(a));return}for(a of t.options){var o=Ge(a);if(Tr(o,e)){a.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Br(t){var e=new MutationObserver(()=>{Yt(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),kr(()=>{e.disconnect()})}function Jr(t,e,r=e){var a=!0;vt(t,"change",o=>{var s=o?"[selected]":":checked",u;if(t.multiple)u=[].map.call(t.querySelectorAll(s),Ge);else{var d=t.querySelector(s)??t.querySelector("option:not([disabled])");u=d&&Ge(d)}r(u)}),Or(()=>{var o=e();if(Yt(t,o,a),a&&o===void 0){var s=t.querySelector(":checked");s!==null&&(o=Ge(s),r(o))}t.__value=o,a=!1}),Br(t)}function Ge(t){return"__value"in t?t.__value:t.value}function Zr(t,e,r=e){var a=new WeakSet;vt(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=ot(t)?lt(s):s,r(s),Te!==null&&a.add(Te),await $r(),s!==(s=e())){var u=t.selectionStart,d=t.selectionEnd;t.value=s??"",d!==null&&(t.selectionStart=u,t.selectionEnd=Math.min(d,t.value.length))}}),(ve&&t.defaultValue!==t.value||Ut(e)==null&&t.value)&&(r(ot(t)?lt(t.value):t.value),Te!==null&&a.add(Te)),jt(()=>{var o=e();if(t===document.activeElement){var s=Nr??Te;if(a.has(s))return}ot(t)&&o===lt(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Ke(t,e,r=e){vt(t,"change",a=>{var o=a?t.defaultChecked:t.checked;r(o)}),(ve&&t.defaultChecked!==t.checked||Ut(e)==null)&&r(t.checked),jt(()=>{var a=e();t.checked=!!a})}function ot(t){var e=t.type;return e==="number"||e==="range"}function lt(t){return t===""?null:+t}const Qr=!0,Qn=Object.freeze(Object.defineProperty({__proto__:null,prerender:Qr},Symbol.toStringTag,{value:"Module"})),ze="unsolvable";var Kr=Y("<p>The 3CNF formula is unsatisfiable.</p>"),en=Y("<div> </div>"),tn=Y("<main><h2>CertRenderer 3SAT</h2> <!></main>");function rn(t,e){Oe(e,!0);var r=tn(),a=H(L(r),2);{var o=u=>{var d=Kr();F(u,d)},s=u=>{var d=$e(),f=_e(d);Ae(f,17,()=>e.cert.assignments,Ne,(h,p)=>{var C=Ve(()=>Ar(M(p),2));let T=()=>M(C)[0],I=()=>M(C)[1];var _=en(),S=L(_);R(_),ge(()=>Ce(S,`${T()??""} â‰” ${I()==!0?"T":I()==!1?"F":"Either"}`)),F(h,_)}),F(u,d)};re(a,u=>{e.cert==ze?u(o):u(s,!1)})}R(r),F(t,r),ke()}var nn=Y("<p>The graph doesn't contain a hamiltonian cycle.</p>"),an=Y("<li> </li>"),sn=Y("<ol></ol>"),on=Y("<span><!> </span>"),ln=Y("<div></div>"),un=Y('<div class="controls"><input type="checkbox" name="showAsListCheckbox"/> <label for="showAsListCheckbox">Show as list</label></div> <!>',1),dn=Y("<main><h2>CertRenderer HCYCLE</h2> <!></main>");function cn(t,e){Oe(e,!0);let r=be(!0);var a=dn(),o=H(L(a),2);{var s=d=>{var f=nn();F(d,f)},u=d=>{var f=un(),h=_e(f),p=L(h);Qe(p),Ze(2),R(h);var C=H(h,2);{var T=_=>{var S=sn();Ae(S,21,()=>e.cert.path,Ne,(k,$)=>{var X=an(),B=L(X,!0);R(X),ge(()=>Ce(B,M($).id)),F(k,X)}),R(S),F(_,S)},I=_=>{var S=ln();Ae(S,21,()=>e.cert.path,Ne,(k,$,X)=>{var B=on(),j=L(B);Xe(j,()=>X!=0?"&ThinSpace;&LongRightArrow;&ThinSpace;":"");var G=H(j);R(B),ge(()=>Ce(G,` ${M($).id??""}`)),F(k,B)}),R(S),F(_,S)};re(C,_=>{M(r)?_(T):_(I,!1)})}Ke(p,()=>M(r),_=>ce(r,_)),F(d,f)};re(o,d=>{e.cert==ze?d(s):d(u,!1)})}R(a),F(t,a),ke()}class fn extends Error{}function qt(t,e){if(!t)throw new fn("[ASSERT] "+e)}function vn(t,e,r){return r.indexOf(t)===e}class z{static SerializableClass(){return function(e){const r=e.name;e.prototype.__type=r,z.registerClass(r,e)}}static serialize(e){if(e==null)return e;if(Array.isArray(e))return e.map(z.serialize);if(e instanceof Set)return{__type:"Set",values:Array.from(e).map(z.serialize)};if(e instanceof Map)return{__type:"Map",entries:Array.from(e.entries()).map(([r,a])=>[z.serialize(r),z.serialize(a)])};if(typeof e=="object"){if(Array.isArray(e))return e.map(z.serialize);const r=e.constructor,o={__type:e.__type??r.name};for(const[s,u]of Object.entries(e))o[s]=z.serialize(u);return o}return e}static revive(e){if(e==null)return e;if(Array.isArray(e))return e.map(z.revive);if(e.__type==="Set")return new Set(e.values.map(z.revive));if(e.__type==="Map")return new Map(e.entries.map(([r,a])=>[z.revive(r),z.revive(a)]));if(e.__type){const r=z.getClass(e.__type);if(!r)throw new Error(`Unknown class: ${e.__type}`);const a=Object.create(r.prototype);for(const[o,s]of Object.entries(e))o!=="__type"&&(a[o]=z.revive(s));return a}return e}static registerClass(e,r){z.classRegistry.set(e,r)}static getClass(e){return z.classRegistry.get(e)}static classRegistry=new Map}z.registerClass(Object.name,Object);class Bt{}var At={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Dt;function hn(){if(Dt)return At;Dt=1;var t;return(function(e){(function(r){var a=typeof globalThis=="object"?globalThis:typeof Nt=="object"?Nt:typeof self=="object"?self:typeof this=="object"?this:f(),o=s(e);typeof a.Reflect<"u"&&(o=s(a.Reflect,o)),r(o,a),typeof a.Reflect>"u"&&(a.Reflect=e);function s(h,p){return function(C,T){Object.defineProperty(h,C,{configurable:!0,writable:!0,value:T}),p&&p(C,T)}}function u(){try{return Function("return this;")()}catch{}}function d(){try{return(0,eval)("(function() { return this; })()")}catch{}}function f(){return u()||d()}})(function(r,a){var o=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",u=s&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",d=s&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",f=typeof Object.create=="function",h={__proto__:[]}instanceof Array,p=!f&&!h,C={create:f?function(){return rt(Object.create(null))}:h?function(){return rt({__proto__:null})}:function(){return rt({})},has:p?function(n,i){return o.call(n,i)}:function(n,i){return i in n},get:p?function(n,i){return o.call(n,i)?n[i]:void 0}:function(n,i){return n[i]}},T=Object.getPrototypeOf(Function),I=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:nr(),_=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ar(),S=typeof WeakMap=="function"?WeakMap:ir(),k=s?Symbol.for("@reflect-metadata:registry"):void 0,$=er(),X=tr($);function B(n,i,l,c){if(g(l)){if(!mt(n))throw new TypeError;if(!wt(i))throw new TypeError;return P(n,i)}else{if(!mt(n))throw new TypeError;if(!Z(i))throw new TypeError;if(!Z(c)&&!g(c)&&!le(c))throw new TypeError;return le(c)&&(c=void 0),l=he(l),W(n,i,l,c)}}r("decorate",B);function j(n,i){function l(c,E){if(!Z(c))throw new TypeError;if(!g(E)&&!Qt(E))throw new TypeError;de(n,i,c,E)}return l}r("metadata",j);function G(n,i,l,c){if(!Z(l))throw new TypeError;return g(c)||(c=he(c)),de(n,i,l,c)}r("defineMetadata",G);function x(n,i,l){if(!Z(i))throw new TypeError;return g(l)||(l=he(l)),ne(n,i,l)}r("hasMetadata",x);function A(n,i,l){if(!Z(i))throw new TypeError;return g(l)||(l=he(l)),ue(n,i,l)}r("hasOwnMetadata",A);function U(n,i,l){if(!Z(i))throw new TypeError;return g(l)||(l=he(l)),J(n,i,l)}r("getMetadata",U);function se(n,i,l){if(!Z(i))throw new TypeError;return g(l)||(l=he(l)),ee(n,i,l)}r("getOwnMetadata",se);function oe(n,i){if(!Z(n))throw new TypeError;return g(i)||(i=he(i)),q(n,i)}r("getMetadataKeys",oe);function b(n,i){if(!Z(n))throw new TypeError;return g(i)||(i=he(i)),ye(n,i)}r("getOwnMetadataKeys",b);function O(n,i,l){if(!Z(i))throw new TypeError;if(g(l)||(l=he(l)),!Z(i))throw new TypeError;g(l)||(l=he(l));var c=Pe(i,l,!1);return g(c)?!1:c.OrdinaryDeleteMetadata(n,i,l)}r("deleteMetadata",O);function P(n,i){for(var l=n.length-1;l>=0;--l){var c=n[l],E=c(i);if(!g(E)&&!le(E)){if(!wt(E))throw new TypeError;i=E}}return i}function W(n,i,l,c){for(var E=n.length-1;E>=0;--E){var Q=n[E],te=Q(i,l,c);if(!g(te)&&!le(te)){if(!Z(te))throw new TypeError;c=te}}return c}function ne(n,i,l){var c=ue(n,i,l);if(c)return!0;var E=tt(i);return le(E)?!1:ne(n,E,l)}function ue(n,i,l){var c=Pe(i,l,!1);return g(c)?!1:yt(c.OrdinaryHasOwnMetadata(n,i,l))}function J(n,i,l){var c=ue(n,i,l);if(c)return ee(n,i,l);var E=tt(i);if(!le(E))return J(n,E,l)}function ee(n,i,l){var c=Pe(i,l,!1);if(!g(c))return c.OrdinaryGetOwnMetadata(n,i,l)}function de(n,i,l,c){var E=Pe(l,c,!0);E.OrdinaryDefineOwnMetadata(n,i,l,c)}function q(n,i){var l=ye(n,i),c=tt(n);if(c===null)return l;var E=q(c,i);if(E.length<=0)return l;if(l.length<=0)return E;for(var Q=new _,te=[],N=0,v=l;N<v.length;N++){var y=v[N],m=Q.has(y);m||(Q.add(y),te.push(y))}for(var w=0,D=E;w<D.length;w++){var y=D[w],m=Q.has(y);m||(Q.add(y),te.push(y))}return te}function ye(n,i){var l=Pe(n,i,!1);return l?l.OrdinaryOwnMetadataKeys(n,i):[]}function me(n){if(n===null)return 1;switch(typeof n){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return n===null?1:6;default:return 6}}function g(n){return n===void 0}function le(n){return n===null}function Re(n){return typeof n=="symbol"}function Z(n){return typeof n=="object"?n!==null:typeof n=="function"}function ie(n,i){switch(me(n)){case 0:return n;case 1:return n;case 2:return n;case 3:return n;case 4:return n;case 5:return n}var l="string",c=bt(n,u);if(c!==void 0){var E=c.call(n,l);if(Z(E))throw new TypeError;return E}return Jt(n)}function Jt(n,i){var l,c,E;{var Q=n.toString;if(Ue(Q)){var c=Q.call(n);if(!Z(c))return c}var l=n.valueOf;if(Ue(l)){var c=l.call(n);if(!Z(c))return c}}throw new TypeError}function yt(n){return!!n}function Zt(n){return""+n}function he(n){var i=ie(n);return Re(i)?i:Zt(i)}function mt(n){return Array.isArray?Array.isArray(n):n instanceof Object?n instanceof Array:Object.prototype.toString.call(n)==="[object Array]"}function Ue(n){return typeof n=="function"}function wt(n){return typeof n=="function"}function Qt(n){switch(me(n)){case 3:return!0;case 4:return!0;default:return!1}}function et(n,i){return n===i||n!==n&&i!==i}function bt(n,i){var l=n[i];if(l!=null){if(!Ue(l))throw new TypeError;return l}}function Ct(n){var i=bt(n,d);if(!Ue(i))throw new TypeError;var l=i.call(n);if(!Z(l))throw new TypeError;return l}function St(n){return n.value}function It(n){var i=n.next();return i.done?!1:i}function Et(n){var i=n.return;i&&i.call(n)}function tt(n){var i=Object.getPrototypeOf(n);if(typeof n!="function"||n===T||i!==T)return i;var l=n.prototype,c=l&&Object.getPrototypeOf(l);if(c==null||c===Object.prototype)return i;var E=c.constructor;return typeof E!="function"||E===n?i:E}function Kt(){var n;!g(k)&&typeof a.Reflect<"u"&&!(k in a.Reflect)&&typeof a.Reflect.defineMetadata=="function"&&(n=rr(a.Reflect));var i,l,c,E=new S,Q={registerProvider:te,getProvider:v,setProvider:m};return Q;function te(w){if(!Object.isExtensible(Q))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case n===w:break;case g(i):i=w;break;case i===w:break;case g(l):l=w;break;case l===w:break;default:c===void 0&&(c=new _),c.add(w);break}}function N(w,D){if(!g(i)){if(i.isProviderFor(w,D))return i;if(!g(l)){if(l.isProviderFor(w,D))return i;if(!g(c))for(var V=Ct(c);;){var K=It(V);if(!K)return;var fe=St(K);if(fe.isProviderFor(w,D))return Et(V),fe}}}if(!g(n)&&n.isProviderFor(w,D))return n}function v(w,D){var V=E.get(w),K;return g(V)||(K=V.get(D)),g(K)&&(K=N(w,D),g(K)||(g(V)&&(V=new I,E.set(w,V)),V.set(D,K))),K}function y(w){if(g(w))throw new TypeError;return i===w||l===w||!g(c)&&c.has(w)}function m(w,D,V){if(!y(V))throw new Error("Metadata provider not registered.");var K=v(w,D);if(K!==V){if(!g(K))return!1;var fe=E.get(w);g(fe)&&(fe=new I,E.set(w,fe)),fe.set(D,V)}return!0}}function er(){var n;return!g(k)&&Z(a.Reflect)&&Object.isExtensible(a.Reflect)&&(n=a.Reflect[k]),g(n)&&(n=Kt()),!g(k)&&Z(a.Reflect)&&Object.isExtensible(a.Reflect)&&Object.defineProperty(a.Reflect,k,{enumerable:!1,configurable:!1,writable:!1,value:n}),n}function tr(n){var i=new S,l={isProviderFor:function(y,m){var w=i.get(y);return g(w)?!1:w.has(m)},OrdinaryDefineOwnMetadata:te,OrdinaryHasOwnMetadata:E,OrdinaryGetOwnMetadata:Q,OrdinaryOwnMetadataKeys:N,OrdinaryDeleteMetadata:v};return $.registerProvider(l),l;function c(y,m,w){var D=i.get(y),V=!1;if(g(D)){if(!w)return;D=new I,i.set(y,D),V=!0}var K=D.get(m);if(g(K)){if(!w)return;if(K=new I,D.set(m,K),!n.setProvider(y,m,l))throw D.delete(m),V&&i.delete(y),new Error("Wrong provider for target.")}return K}function E(y,m,w){var D=c(m,w,!1);return g(D)?!1:yt(D.has(y))}function Q(y,m,w){var D=c(m,w,!1);if(!g(D))return D.get(y)}function te(y,m,w,D){var V=c(w,D,!0);V.set(y,m)}function N(y,m){var w=[],D=c(y,m,!1);if(g(D))return w;for(var V=D.keys(),K=Ct(V),fe=0;;){var xt=It(K);if(!xt)return w.length=fe,w;var sr=St(xt);try{w[fe]=sr}catch(or){try{Et(K)}finally{throw or}}fe++}}function v(y,m,w){var D=c(m,w,!1);if(g(D)||!D.delete(y))return!1;if(D.size===0){var V=i.get(m);g(V)||(V.delete(w),V.size===0&&i.delete(V))}return!0}}function rr(n){var i=n.defineMetadata,l=n.hasOwnMetadata,c=n.getOwnMetadata,E=n.getOwnMetadataKeys,Q=n.deleteMetadata,te=new S,N={isProviderFor:function(v,y){var m=te.get(v);return!g(m)&&m.has(y)?!0:E(v,y).length?(g(m)&&(m=new _,te.set(v,m)),m.add(y),!0):!1},OrdinaryDefineOwnMetadata:i,OrdinaryHasOwnMetadata:l,OrdinaryGetOwnMetadata:c,OrdinaryOwnMetadataKeys:E,OrdinaryDeleteMetadata:Q};return N}function Pe(n,i,l){var c=$.getProvider(n,i);if(!g(c))return c;if(l){if($.setProvider(n,i,X))return X;throw new Error("Illegal state.")}}function nr(){var n={},i=[],l=(function(){function N(v,y,m){this._index=0,this._keys=v,this._values=y,this._selector=m}return N.prototype["@@iterator"]=function(){return this},N.prototype[d]=function(){return this},N.prototype.next=function(){var v=this._index;if(v>=0&&v<this._keys.length){var y=this._selector(this._keys[v],this._values[v]);return v+1>=this._keys.length?(this._index=-1,this._keys=i,this._values=i):this._index++,{value:y,done:!1}}return{value:void 0,done:!0}},N.prototype.throw=function(v){throw this._index>=0&&(this._index=-1,this._keys=i,this._values=i),v},N.prototype.return=function(v){return this._index>=0&&(this._index=-1,this._keys=i,this._values=i),{value:v,done:!0}},N})(),c=(function(){function N(){this._keys=[],this._values=[],this._cacheKey=n,this._cacheIndex=-2}return Object.defineProperty(N.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),N.prototype.has=function(v){return this._find(v,!1)>=0},N.prototype.get=function(v){var y=this._find(v,!1);return y>=0?this._values[y]:void 0},N.prototype.set=function(v,y){var m=this._find(v,!0);return this._values[m]=y,this},N.prototype.delete=function(v){var y=this._find(v,!1);if(y>=0){for(var m=this._keys.length,w=y+1;w<m;w++)this._keys[w-1]=this._keys[w],this._values[w-1]=this._values[w];return this._keys.length--,this._values.length--,et(v,this._cacheKey)&&(this._cacheKey=n,this._cacheIndex=-2),!0}return!1},N.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=n,this._cacheIndex=-2},N.prototype.keys=function(){return new l(this._keys,this._values,E)},N.prototype.values=function(){return new l(this._keys,this._values,Q)},N.prototype.entries=function(){return new l(this._keys,this._values,te)},N.prototype["@@iterator"]=function(){return this.entries()},N.prototype[d]=function(){return this.entries()},N.prototype._find=function(v,y){if(!et(this._cacheKey,v)){this._cacheIndex=-1;for(var m=0;m<this._keys.length;m++)if(et(this._keys[m],v)){this._cacheIndex=m;break}}return this._cacheIndex<0&&y&&(this._cacheIndex=this._keys.length,this._keys.push(v),this._values.push(void 0)),this._cacheIndex},N})();return c;function E(N,v){return N}function Q(N,v){return v}function te(N,v){return[N,v]}}function ar(){var n=(function(){function i(){this._map=new I}return Object.defineProperty(i.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),i.prototype.has=function(l){return this._map.has(l)},i.prototype.add=function(l){return this._map.set(l,l),this},i.prototype.delete=function(l){return this._map.delete(l)},i.prototype.clear=function(){this._map.clear()},i.prototype.keys=function(){return this._map.keys()},i.prototype.values=function(){return this._map.keys()},i.prototype.entries=function(){return this._map.entries()},i.prototype["@@iterator"]=function(){return this.keys()},i.prototype[d]=function(){return this.keys()},i})();return n}function ir(){var n=16,i=C.create(),l=c();return(function(){function v(){this._key=c()}return v.prototype.has=function(y){var m=E(y,!1);return m!==void 0?C.has(m,this._key):!1},v.prototype.get=function(y){var m=E(y,!1);return m!==void 0?C.get(m,this._key):void 0},v.prototype.set=function(y,m){var w=E(y,!0);return w[this._key]=m,this},v.prototype.delete=function(y){var m=E(y,!1);return m!==void 0?delete m[this._key]:!1},v.prototype.clear=function(){this._key=c()},v})();function c(){var v;do v="@@WeakMap@@"+N();while(C.has(i,v));return i[v]=!0,v}function E(v,y){if(!o.call(v,l)){if(!y)return;Object.defineProperty(v,l,{value:C.create()})}return v[l]}function Q(v,y){for(var m=0;m<y;++m)v[m]=Math.random()*255|0;return v}function te(v){if(typeof Uint8Array=="function"){var y=new Uint8Array(v);return typeof crypto<"u"?crypto.getRandomValues(y):typeof msCrypto<"u"?msCrypto.getRandomValues(y):Q(y,v),y}return Q(new Array(v),v)}function N(){var v=te(n);v[6]=v[6]&79|64,v[8]=v[8]&191|128;for(var y="",m=0;m<n;++m){var w=v[m];(m===4||m===6||m===8)&&(y+="-"),w<16&&(y+="0"),y+=w.toString(16).toLowerCase()}return y}}function rt(n){return n.__=void 0,delete n.__,n}})})(t||(t={})),At}hn();var pn=Object.getOwnPropertyDescriptor,_t=(t,e,r,a)=>{for(var o=a>1?void 0:a?pn(e,r):e,s=t.length-1,u;s>=0;s--)(u=t[s])&&(o=u(o)||o);return o};let Ye=class{id;varName;negated;constructor(t,e,r=!1){this.id=t,this.varName=e,this.negated=r}toJson(){return{__type:Ye.name,id:this.id,varName:this.varName,negated:this.negated}}asString(){return`${this.negated?"!":""}${this.varName}`}asHtmlString(){return(this.negated?"&not;":"")+this.varName}};Ye=_t([z.SerializableClass()],Ye);let qe=class{id;literals;constructor(t,e){qt(e.length==3),this.id=t,this.literals=[e[0],e[1],e[2]]}asString(){return this.literals.map(t=>t.asString()).join(" ")}asHtmlString(){return"("+this.literals.map(e=>e.asHtmlString()).join("&or;")+")"}toJSON(){return{__type:qe.name,id:this.id,literals:this.literals}}};qe=_t([z.SerializableClass()],qe);let De=class extends Bt{_variables=new Set;_clauses=new Set;addVariable(t){this._variables.add(t)}addClause(t){this._clauses.add(t),t.literals.forEach(e=>this.addVariable(e.varName))}asString(){return Array.from(this._clauses.values()).map(t=>t.asString()).join(`
`)}asHtmlString(){return this.clauses.map(t=>t.asHtmlString()).join("&and;")}get variables(){return Array.from(this._variables.values())}get clauses(){return Array.from(this._clauses.values())}empty(){const t=this.clauses.length==0||this.variables.length==0;return console.debug("empty",t),t}static fromString(t){const e=t.split(`
`).map(a=>a.trim()).filter(a=>a.length).filter(vn);let r=new De;for(let a=0;a<e.length;a++){const o=e[a],s=o.split(" ").map(f=>f.trim()).filter(f=>f.length);if(s.length!=3)return`Clause number ${a+1} (${o}) doesn't have exactly 3 literals. Instead it has ${s.length} literals.`;let u=[];for(let f=0;f<s.length;f++){let h=s[f];const p=h.startsWith("!");if(p&&(h=h.replace("!","")),h.includes("!")||h.includes("||")||h.includes("&&"))return`Literal ${p?"!":""}${h} is invalid.`;const C=new Ye(`v:${f}-c:${a}`,h,p);u.push(C)}qt(u.length==3);const d=new qe(`c:${a}`,u);r.addClause(d)}return r}};De=_t([z.SerializableClass()],De);class gt{static cnf3TextInput={NO_SOLUTION:`x y z
!x y z
x !y z
!x !y z
x y !z
!x y !z
x !y !z
!x !y !z
`,BASIC:`x y z
a b c
`};static getTextInputs(e){if(e===De)return gt.cnf3TextInput;throw new Error(`No demos provided for class ${e.name}.`)}}function _n(t,e,r,a,o){ce(e,r[M(a)],!0),o()}var gn=Y("<option> </option>"),yn=Y(`<div class="cnf-editor"><h2>CNF Editor</h2> <p><i>Removes duplicate clauses automatically.</i></p> <textarea class="svelte-whqlb8">
    </textarea> <select><option>--Choose a demo--</option><!></select></div>`);function mn(t,e){Oe(e,!0);const r=gt.getTextInputs(De);let a=be(Dr(e.cnf?.asString()??"")),o=be("");const s=I=>{e.onChange&&e.onChange(I)},u=I=>{e.onWrongFormat&&e.onWrongFormat(I)},d=()=>{const I=De.fromString(M(a));if(typeof I=="string"){u(I);return}s(I)};ht(()=>{e.cnf&&ce(a,e.cnf.asString(),!0)});var f=yn(),h=H(L(f),4);Rr(h),h.__change=d;var p=H(h,2);p.__change=[_n,a,r,o,d];var C=L(p);C.value=C.__value="";var T=H(C);Ae(T,17,()=>Object.keys(r),Ne,(I,_)=>{var S=gn(),k=L(S,!0);R(S);var $={};ge(()=>{Ce(k,M(_)),$!==($=M(_))&&(S.value=(S.__value=M(_))??"")}),F(I,S)}),R(p),R(f),Zr(h,()=>M(a),I=>ce(a,I)),Jr(p,()=>M(o),I=>ce(o,I)),F(t,f),ke()}pt(["change"]);function wn(t,e,r){e()&&r.stepIndex>0&&e()()}function bn(t,e,r,a){e()&&r.stepIndex<a-1&&e()()}var Cn=Y("<h3> </h3> <p><!></p> <!>",1),Sn=Y("<h3> </h3> <p><!></p>",1),In=Y('<section><div class="header svelte-bomf3d"><h2>Reduction Stepper</h2> <div class="controls"><div><input type="checkbox" name="showAllCheckbox"/> <label for="showAllCheckbox">Show all</label></div> <div><button>Previous</button> <button>Next</button> <span> </span></div></div></div> <!></section>');function En(t,e){Oe(e,!0);let r=je(e,"indent",3,0),a=je(e,"onNextClick",3,void 0),o=je(e,"onPrevClick",3,void 0);const s=e.steps.length;let u=be(!1);var d=In(),f=L(d),h=H(L(f),2),p=L(h),C=L(p);Qe(C),Ze(2),R(p);var T=H(p,2),I=L(T);I.__click=[wn,o,e];var _=H(I,2);_.__click=[bn,a,e,s];var S=H(_,2),k=L(S);R(S),R(T),R(h),R(f);var $=H(f,2);{var X=j=>{var G=$e(),x=_e(G);Ae(x,17,()=>e.steps,Ne,(A,U,se)=>{var oe=Cn(),b=_e(oe),O=L(b);R(b);var P=H(b,2),W=L(P);Xe(W,()=>M(U).description),R(P);var ne=H(P,2);re(ne,ue=>{}),ge(()=>Ce(O,`Step #${se+1}: ${M(U).title??""}`)),F(A,oe)}),F(j,G)},B=j=>{var G=$e(),x=_e(G);{var A=U=>{const se=Ve(()=>e.steps[e.stepIndex]);var oe=Sn(),b=_e(oe),O=L(b);R(b);var P=H(b,2),W=L(P);Xe(W,()=>M(se).description),R(P),ge(()=>Ce(O,`Step #${e.stepIndex+1}: ${M(se).title??""}`)),F(U,oe)};re(x,U=>{e.stepIndex<e.steps.length&&U(A)})}F(j,G)};re($,j=>{M(u)?j(X):j(B,!1)})}R(d),ge(()=>{qr(d,`padding-left: ${r()*100}px; border: solid black 1px`),Ce(k,`${e.stepIndex+1}/${s??""}`)}),Ke(C,()=>M(u),j=>ce(u,j)),F(t,d),ke()}pt(["click"]);var xn=Y('<div class="clause svelte-z6uwnm"><!></div>'),On=Y('<div class="cnf-renderer"><h2>CNF Renderer</h2> <div><input type="checkbox" name="viewAsColumnCheckbox"/> <label for="viewAsColumnCheckbox">View as column</label></div> <!></div>');function Rt(t,e){Oe(e,!0);let r=be(!1);var a=On(),o=H(L(a),2),s=L(o);Qe(s),Ze(2),R(o);var u=H(o,2);{var d=h=>{var p=$e(),C=_e(p);Ae(C,17,()=>e.cnf.clauses,Ne,(T,I)=>{var _=xn(),S=L(_);Xe(S,()=>M(I).asHtmlString()),R(_),F(T,_)}),F(h,p)},f=h=>{var p=$e(),C=_e(p);Xe(C,()=>e.cnf.asHtmlString()),F(h,p)};re(u,h=>{M(r)?h(d):h(f,!1)})}R(a),Ke(s,()=>M(r),h=>ce(r,h)),F(t,a),ke()}const Pt={DEFAULT_STYLE:[{selector:"node",style:{label:"data(id)","text-valign":"top",color:"#000","background-color":"#61bffc","text-outline-color":"#fff","text-outline-width":2,"border-color":"black","border-style":"solid","border-width":2}},{selector:"edge",style:{"curve-style":"bezier","line-color":"black",width:2}}],"3SAT-HCYCLE":[{selector:"node",style:{label:"data(id)","font-size":12,"text-valign":"top","background-color":"blue","border-color":"black","border-style":"solid","border-width":2}},{selector:"node.true",style:{"background-color":"green"}},{selector:"node.false",style:{"background-color":"red"}},{selector:"node.source, node.inbetween, node.target",style:{"background-color":"white","border-style":"solid","border-color":"black"}},{selector:"node.clause",style:{"background-color":"orange"}},{selector:"node.guarantee",style:{opacity:.5}},{selector:"edge",style:{"line-color":"black","target-arrow-color":"black","target-arrow-shape":"chevron","curve-style":"bezier","arrow-scale":1}},{selector:"edge.muted",style:{"line-opacity":.2,"line-color":"black"}},{selector:"edge.clause",style:{"curve-style":"bezier",width:3,"line-opacity":1,"arrow-scale":2}},{selector:"edge.true_in",style:{"target-arrow-color":"green","line-color":"green","line-style":"dashed"}},{selector:"edge.true_out",style:{"target-arrow-color":"green","line-color":"green"}},{selector:"edge.false_in",style:{"target-arrow-color":"red","line-color":"red","line-style":"dashed"}},{selector:"edge.false_out",style:{"target-arrow-color":"red","line-color":"red"}},{selector:"edge.solved",style:{"line-opacity":.2}},{selector:"edge.solved.used",style:{"line-opacity":1}}]};var kn=Y('<section><h2>Graph Renderer</h2> <div id="cy" class="svelte-ovjh18"></div></section>');function Lt(t,e){Oe(e,!0);let r=je(e,"style",3,"DEFAULT_STYLE"),a,o;ht(()=>{const d=e.graph.nodes.map(C=>({data:{id:C.id,label:C.id},position:C.position,classes:C.classes})),f=e.graph.edges.map(C=>({data:{id:C.id,source:C.from,target:C.to},classes:C.classes})),h=o?o.pan():{x:0,y:0},p=o?o.zoom():1;o?o.elements().remove():o=Wr({container:a,wheelSensitivity:5,style:Pt[r()]}),o.add([...d,...f]),o.style(Pt[r()]),o.zoom(p),o.pan(h)});var s=kn(),u=H(L(s),2);Gr(u,d=>a=d,()=>a),R(s),F(t,s),ke()}const Mn=":",Me="n:",we="n%:",ae="e:",Se="source",Ie="target",Fe="n%c:",He="n%i:",Ee="n%t:",xe="n%f:";function Tn(t,e,r={serialize:a=>z.serialize(a),revive:a=>z.revive(a)}){let a=Hr(e);Fr(()=>{const s=localStorage.getItem(t);if(s){const u=r.revive(JSON.parse(s));a.set(u)}});const o=()=>{if($t(a)){const s=JSON.stringify(r.serialize($t(a)));localStorage.setItem(t,s)}else localStorage.removeItem(t)};return{value:a,save:()=>o()}}var $n=Object.getOwnPropertyDescriptor,Nn=(t,e,r,a)=>{for(var o=a>1?void 0:a?$n(e,r):e,s=t.length-1,u;s>=0;s--)(u=t[s])&&(o=u(o)||o);return o};let ct=class{assignments;constructor(t){this.assignments=t}};ct=Nn([z.SerializableClass()],ct);class An{decode(e,r){const{path:a}=r,o=new Map;for(let s=0;s<a.length;s++){const u=a[s].id;if(u.startsWith(Ee)){const d=u.substring(Ee.length,u.lastIndexOf("_"));o.has(d)||o.set(d,!0)}else if(u.startsWith(xe)){const d=u.substring(xe.length,u.lastIndexOf("_"));o.has(d)||o.set(d,!1)}}return new ct(o)}}var Dn=Object.getOwnPropertyDescriptor,Rn=(t,e,r,a)=>{for(var o=a>1?void 0:a?Dn(e,r):e,s=t.length-1,u;s>=0;s--)(u=t[s])&&(o=u(o)||o);return o};let We=class extends Bt{_nodes;_edges;constructor(){super(),this._nodes=new Set,this._edges=new Set}addNode(t){t.classes==null&&(t.classes=""),this._nodes.add(t)}addEdge(t){t.classes==null&&(t.classes=""),this._edges.add(t)}get nodes(){return Array.from(this._nodes.values())}get edges(){return Array.from(this._edges.values())}removeNode(t){if(!this._nodes.has(t))return;this._nodes.delete(t),Array.from(this.edges).filter(r=>r.to===t.id||r.from===t.id).forEach(r=>this._edges.delete(r))}removeEdge(t){this._edges.delete(t)}empty(){return this.nodes.length==0||this.edges.length==0}copy(){const t=new We;for(const e of this._nodes)t.addNode({id:e.id,label:e.label,position:e.position?{...e.position}:void 0,classes:e.classes});for(const e of this._edges)t.addEdge({id:e.id,from:e.from,to:e.to,weight:e.weight,classes:e.classes});return t}};We=Rn([z.SerializableClass()],We);class Pn{inInstance;rowNodeCount;rowXOffset;varCount;clauseCount;height;yStep;yOffset;xDist=50;yDist=300;constructor(e){this.inInstance=e;const{variables:r,clauses:a}=this.inInstance;this.yOffset=this.yDist/2,this.varCount=r.length,this.clauseCount=a.length,this.height=(this.varCount-1)*this.yDist,this.yStep=(this.height-this.yDist)/(this.clauseCount-1==0?1:this.clauseCount-1),this.rowNodeCount=3*a.length+3,this.rowXOffset=(this.rowNodeCount-1)/2*this.xDist}reduce(){let e=[];const r=this.createVarGadgets();e.push(...r.interSteps);const a=this.createClauseGadgets(r.graph.copy());return e.push(...a.interSteps),{outInstance:a.graph,steps:e}}createClauseGadgets(e){const{clauses:r}=this.inInstance;let a=[],o=e.copy();return a.push({id:"create-clause-gadget-nodes",title:"Create clause nodes",description:`
                <p>
                    For every clause, create one clause node 
                    (this node must be visited exactly once).
                    There are ${this.clauseCount} clause nodes.
                </p>
                <p>
                    For each of the clause, create edges to or from the variable row nodes
                    based on these rules:
                </p>
                <ul>
                    <li>
                        If the literal <b>isn't negated</b>, 
                        pick a free (one that hasn't been used yet in this step) 
                        row node <i>r</i> and connect it to the clause node.

                        The selected node is an <u>out-going</u> node.

                        Then connect the clause node back to a row node <i>r + 1</i> 
                        (adjacent on the right of it).

                        This node is an <u>in-coming</u> node.
                    </li>
                    <li>
                        If the literal <b>is negated</b>, 
                        pick a free row node <i>r</i> 
                        and connect it to the clause node.

                        The selected node is an <u>out-going</u> node.

                        Then connect the clause node back to a row node <i>r - 1</i> 
                        (adjacent on the left of it).

                        This node is an <u>in-coming</u> node.
                    </li>
                </ul>
                <p>
                    This way we gaurantee for each clause that:
                    <ul>
                        <li>
                            If the literal <i>L</i> of some variable <i>X</i> 
                            <b>wasn't negated</b> in the clause, 
                            then we can reach it from an <i>X</i> variable row node 
                            and come back to an <i>X</i> variable row node on the right of it,
                            when we approach it from the left (we assinged X to be True).
                        </li>
                        <li>
                            If the literal <i>L</i> of some variable <i>X</i> 
                            <b>was negated</b> in the clause, 
                            then we can reach it from an <i>X</i> variable row node 
                            and come back to an <i>X</i> variable row node on the left of it,
                            when we approach it from the right (we assigned X to be False).
                        </li>
                    </ul>
                </p>
            `,inSnapshot:this.inInstance,outSnapshot:o,mapping:{}}),r.forEach((s,u)=>{const d=u+1,f=`${d}`,h={id:Fe+`${f}`,position:{x:2*this.rowXOffset,y:u*this.yStep+this.yOffset},classes:"clause"};o.addNode(h),e.addNode(h),s.literals.forEach((p,C)=>{const T=`${p.varName}_${3*d}`,I=`${p.varName}_${3*d+1}`;p.negated?(e.addEdge({id:ae+`${I}-${f}`,from:Me+`${I}`,to:Fe+`${f}`,classes:"false_out"}),e.addEdge({id:ae+`${f}-${T}`,from:Fe+`${f}`,to:Me+`${T}`,classes:"false_in"})):(e.addEdge({id:ae+`${T}-${f}`,from:Me+`${T}`,to:Fe+`${f}`,classes:"true_out"}),e.addEdge({id:ae+`${f}-${I}`,from:Fe+`${f}`,to:Me+`${I}`,classes:"true_in"}))}),a.push({id:`connect-clause-node-${u}`,title:`Connect clause node "${f}" to variable row nodes`,description:`
                    <p>
                        Clause node "${f}" represents the clause ${s.asHtmlString()}.
                    </p>
                    <ul>
                        ${s.literals.map(p=>`
                                <li>
                                    ${p.asHtmlString()}
                                    &hyphen;
                                    ${p.negated?`
                                        because ${p.varName} is <i>negated</i>, 
                                        the <u>out-going</u> node (${p.varName}_${3*d+1})
                                        will be on the <b>right</b> of
                                        the <u>in-coming</u> node (${p.varName}_${3*d}).
                                    `:`
                                        because ${p.varName} is <i>isn't negated</i>, 
                                        the <u>out-going</u> node (${p.varName}_${3*d})
                                        will be on the <b>left</b> of
                                        the <u>in-coming</u> node (${p.varName}_${3*d+1}).
                                    `}
                                </li>
                            `).join("")}
                    </ul>
                    <p>
                        To clarify:
                        <ul>
                            <li>out-going node is incident to an edge connecting a row node to a clause node.</li>
                            <li>in-coming node is incident to an edge connecting a clause node to a row node.</li>
                        </ul>
                    </p>
                `,inSnapshot:this.inInstance,outSnapshot:e.copy(),mapping:{}})}),{graph:e,interSteps:a}}createVarGadgets(){const{variables:e}=this.inInstance;let r=new We,a=new We,o=[];return e.forEach((s,u)=>{if(u==0)a.addNode({id:we+Se,position:{x:0,y:u*this.yDist-this.yDist/2},classes:"source"}),a.addEdge({id:ae+`${Se}-${s}_1`,from:we+`${Se}`,to:Ee+`${s}_1`,classes:"muted"}),a.addEdge({id:ae+`${Se}-${s}_${this.rowNodeCount}`,from:we+`${Se}`,to:xe+`${s}_${this.rowNodeCount}`,classes:"muted"});else{const d=`${e[u-1]}_${s}`;a.addNode({id:He+`${d}`,position:{x:0,y:u*this.yDist-this.yDist/2},classes:"inbetween"});const f=e[u-1];a.addEdge({id:ae+`${f}_1-${d}`,from:Ee+`${f}_1`,to:He+d,classes:"muted"}),a.addEdge({id:ae+`${f}_${this.rowNodeCount}-${d}`,from:xe+`${f}_${this.rowNodeCount}`,to:He+d,classes:"muted"}),a.addEdge({id:ae+`${d}-${s}_1`,from:He+`${d}`,to:Ee+`${s}_1`,classes:"muted"}),a.addEdge({id:ae+`${d}-${s}_${this.rowNodeCount}`,from:He+`${d}`,to:xe+`${s}_${this.rowNodeCount}`,classes:"muted"})}for(let d=1;d<=this.rowNodeCount-1;d++){const f=`${s}_${d}`,h=`${s}_${d+1}`;let p="",C=Me,T=Me;d==1?(p+=" true",C=Ee):d==this.rowNodeCount-1?T=xe:(d+1)%3==0&&(p+=" guarantee");const I={id:C+`${f}`,position:{x:(d-1)*this.xDist-this.rowXOffset,y:u*this.yDist},classes:p};if(r.addNode(I),a.addNode(I),d==this.rowNodeCount-1){const k={id:T+`${h}`,position:{x:d*this.xDist-this.rowXOffset,y:u*this.yDist},classes:"false"};r.addNode(k),a.addNode(k)}const _={id:ae+`${f}-${h}`,from:C+`${f}`,to:T+`${h}`,classes:"muted"},S={id:ae+`${h}-${f}`,from:T+`${h}`,to:C+`${f}`,classes:"muted"};r.addEdge(_),r.addEdge(S),a.addEdge(_),a.addEdge(S)}u==e.length-1&&(a.addNode({id:we+Ie,position:{x:0,y:u*this.yDist+this.yDist/2},classes:"target"}),a.addEdge({id:ae+`${s}_1-${Ie}`,from:Ee+`${s}_1`,to:we+`${Ie}`,classes:"muted"}),a.addEdge({id:ae+`${s}_${this.rowNodeCount}-${Ie}`,from:xe+`${s}_${this.rowNodeCount}`,to:we+`${Ie}`,classes:"muted"}),a.addEdge({id:ae+`${Ie}-${Se}`,from:we+`${Ie}`,to:we+`${Se}`,classes:"muted"}))}),o.push({id:"create-variable-gadgets",title:"Create individual variable gadgets",description:`
                <p>
                    For every variable, create a row variable gadget.
                </p>
                <p>
                    This gadget consists of ${this.rowNodeCount} row nodes.
                    They are all connected birectinally.
                </p>
                <p>
                    The number of row nodes it derived as follows: 
                </p>
                <p>
                    For every clause we need 2 nodes - an <i>out-going</i> and <i>in-coming</i> node.
                    Each of these 2 nodes must be padded a <i>pad</i> node (at least one).
                    The rows themselves also need <i>true</i> and and <i>false</i> ends.
                </p>
                <p>
                    ${this.clauseCount==1?`There is ${this.clauseCount} clause.`:`There are ${this.clauseCount} clauses.`}
                    Therefore we need: 
                    <ul>
                        <li>2 * ${this.clauseCount} out-going and in-coming nodes</li>
                        <li>${this.clauseCount} + 1 pad nodes</li>
                        <li>1 true and 1 false nodes at the row ends</li>
                    </ul>
                </p>
                <p>
                    (2 * ${this.clauseCount}) + (${this.clauseCount} + 1) + 1 + 1 = ${this.rowNodeCount} nodes per variable row.
                </p>
            `,inSnapshot:this.inInstance,outSnapshot:r,mapping:{}}),o.push({id:"create-inbetween-nodes",title:"Create inbetween nodes",description:`
                <p>
                    Create the <i>source</i> node, the <i>inbetween</i> nodes that lie
                    between the variable rows and <i>target</i> node. 
                </p>
                <p>
                    Connect the <i>source</i> node 
                    to the row ends of the first variable "${this.inInstance.variables[0]}".
                    After that connect its row ends to the inbetween/target node below.
                    Finally connect the <i>target</i> node to <i>source</i> node to close the loop.
                </p>
                <p>Why did we do this?</p>
                <p>
                    Going from the <i>source</i> or an <i>inbetween</i> node 
                    to the variable's row node is equivalent to assigning 
                    a boolean value that corresponding variable.
                </p>
                <ul>
                    <li> 
                        Going through the <b>left edge means assigning 'true'</b>.
                    </li>
                    <li>
                        Going though the <b>right edge means assigning 'false'</b>.
                    </li>
                </ul>
                <p>
                    Notice that we can only choose either 'true' or 'false' edge.
                    Backtracking is impossible.
                </p>
                <p>
                    After going through either the right or left edge, 
                    we must visit the row nodes, for the final cycle to be Hamiltonian.
                </p>
                <ul>
                    <li>
                        If we chose the <b>left edge</b>, then we end up on the <b>'true'</b> node 
                        and have to traverse the row nodes from <u>left to right</u> until 
                        we end up at the 'false' node.
                    </li>

                    <li>
                        If we chose the <b>right</b> edge, then we end up on the <b>'false'</b> node 
                        and have to traverse the row nodes from <u>right to left</u> until
                        we end up at the 'true' node.
                    </li>

                    <li>
                        Onwards, the only choice is to continue 
                        to the next <i>inbetween</i>/<i>target</i> node below.
                    </li>
                </ul>
                <p>
                    The last step is to go from the <i>target</i> node back to the <i>source</i> node.
                </p>
            `,inSnapshot:this.inInstance,outSnapshot:a,mapping:{}}),{graph:a,interSteps:o}}}var Ln=Object.getOwnPropertyDescriptor,Fn=(t,e,r,a)=>{for(var o=a>1?void 0:a?Ln(e,r):e,s=t.length-1,u;s>=0;s--)(u=t[s])&&(o=u(o)||o);return o};let ft=class{inInstance=null;outInstance=null;steps=[];stepIndex=0;inCert=null;outCert=null;reset(){this.inInstance=null,this.outInstance=null,this.inCert=null,this.outCert=null,this.steps=[],this.stepIndex=0}resetStepIndex(){this.stepIndex=0}setInInstance(t){this.reset(),this.inInstance=t}set setSteps(t){this.steps=t,this.stepIndex=0}nextStep(){const t=this.steps.length;this.stepIndex=Math.min(this.stepIndex+1,t)}prevStep(){this.stepIndex=Math.max(this.stepIndex-1,0)}hasInstances(){return this.inInstance!=null&&this.outInstance!=null}};ft=Fn([z.SerializableClass()],ft);var Hn=Y('<meta name="description" content="Redcution from 3SAT to HCYCLE"/>'),Gn=(t,e)=>e(),zn=Y('<div class="loading svelte-1cz0gvf"><span class="spinner svelte-1cz0gvf"></span> <span> </span></div>'),Xn=Y("<div><!></div> <!> <div><!></div>",1),Wn=Y("<span>There are no steps to step through.</span>"),Un=Y('<div class="panes svelte-1cz0gvf"><div><!> <!></div> <div><!> <!></div></div>'),jn=Y('<section><h1>3SAT to HCYCLE reduction</h1> <!> <div><button>Reduce</button> <button><!></button> <input type="checkbox" name="showStepperCheckbox"/> <label for="showStepperCheckbox">Show steps</label></div> <!> <!></section>');function Kn(t,e){Oe(e,!0);const r=()=>zr(u,"$redStore",a),[a,o]=Xr();let s=Tn(Ur.LS_3SAT_HCYCLE,new ft),u=s.value,d=be(!1),f=be(!1),h=be("");function p(b){u.update(O=>(O.reset(),O.setInInstance(b),s.save(),O))}function C(){if(r().inInstance){const b=new Pn(r().inInstance),{outInstance:O,steps:P}=b.reduce();u.update(W=>(W.steps=P,W.outInstance=O,W)),s.save()}}async function T(){let{inCert:b,outInstance:O,outCert:P}=r();if(!(!O||P)){ce(f,!0),ce(h,"Solving Hamiltonian cycle...");try{const W=new Worker(new URL(""+new URL("../workers/WorkerHCYCLESolver-BAcpgrZK.js",import.meta.url).href,import.meta.url),{type:"module"}),ne=new Promise(J=>{W.onmessage=ee=>{W.terminate(),J(ee.data)}}),ue=z.revive(z.serialize(O));if(W.postMessage(z.serialize(O)),P=await ne,P==ze)u.update(J=>(J.inCert=ze,J.outCert=ze,J));else{const J=O,ee=P.path;J.edges.forEach(q=>q.classes+=" solved");const de=q=>q.slice(q.search(Mn)+1);for(let q=0;q<ee.length-1;q++){const ye=de(ee[q].id),me=de(ee[q+1].id),g=ae+`${ye}-${me}`,le=J.edges.find(Re=>Re.id==g);le&&(J.removeEdge(le),le.classes+=" used",J.addEdge(le))}b=new An().decode(J,P),u.update(q=>(q.inCert=b,q.outCert=P,q.outInstance=J,q))}s.save()}catch(W){console.error("Error during solving:",W),ce(h,"An error occured while solving.")}finally{ce(f,!1),ce(h,"")}}}ht(()=>{u.update(b=>(b.resetStepIndex(),b))});var I=jn();Pr(b=>{var O=Hn();Lr.title="3SAT to HCYCLE",F(b,O)});var _=H(L(I),2);mn(_,{get cnf(){return r().inInstance},onChange:b=>p(b),onWrongFormat:b=>alert("From editor: "+b)});var S=H(_,2),k=L(S);k.__click=C;var $=H(k,2);$.__click=[Gn,T];var X=L($);{var B=b=>{var O=Tt("Solving...");F(b,O)},j=b=>{var O=Tt("Solve");F(b,O)};re(X,b=>{M(f)?b(B):b(j,!1)})}R($);var G=H($,2);Qe(G),Ze(2),R(S);var x=H(S,2);{var A=b=>{var O=zn(),P=H(L(O),2),W=L(P,!0);R(P),R(O),ge(()=>Ce(W,M(h))),F(b,O)};re(x,b=>{M(f)&&b(A)})}var U=H(x,2);{var se=b=>{const O=Ve(()=>r().steps),P=Ve(()=>r().stepIndex);var W=$e(),ne=_e(W);{var ue=ee=>{var de=Xn(),q=_e(de),ye=L(q);{var me=ie=>{Rt(ie,{get cnf(){return M(O)[M(P)].inSnapshot}})};re(ye,ie=>{M(P)<M(O).length&&M(O)[M(P)].inSnapshot&&!M(O)[M(P)].inSnapshot.empty()&&ie(me)})}R(q);var g=H(q,2);En(g,{get steps(){return r().steps},get stepIndex(){return r().stepIndex},onPrevClick:()=>{u.update(ie=>(ie.prevStep(),ie)),s.save()},onNextClick:()=>{u.update(ie=>(ie.nextStep(),ie)),s.save()}});var le=H(g,2),Re=L(le);{var Z=ie=>{Lt(ie,{get graph(){return r().steps[r().stepIndex].outSnapshot},style:"3SAT-HCYCLE"})};re(Re,ie=>{r().stepIndex<r().steps.length&&r().steps[r().stepIndex].outSnapshot&&ie(Z)})}R(le),F(ee,de)},J=ee=>{var de=Wn();F(ee,de)};re(ne,ee=>{M(O).length?ee(ue):ee(J,!1)})}F(b,W)},oe=b=>{var O=Un(),P=L(O),W=L(P);{var ne=g=>{Rt(g,{get cnf(){return r().inInstance}})};re(W,g=>{r().inInstance&&!r().inInstance.empty()&&g(ne)})}var ue=H(W,2);{var J=g=>{rn(g,{get cert(){return r().inCert}})};re(ue,g=>{r().inCert&&g(J)})}R(P);var ee=H(P,2),de=L(ee);{var q=g=>{Lt(g,{get graph(){return r().outInstance},style:"3SAT-HCYCLE"})};re(de,g=>{r().outInstance&&!r().outInstance.empty()&&g(q)})}var ye=H(de,2);{var me=g=>{cn(g,{get cert(){return r().outCert}})};re(ye,g=>{r().outCert&&g(me)})}R(ee),R(O),F(b,O)};re(U,b=>{M(d)?b(se):b(oe,!1)})}R(I),ge(b=>$.disabled=b,[()=>!r().hasInstances()||M(f)]),Ke(G,()=>M(d),b=>ce(d,b)),F(t,I),ke(),o()}pt(["click"]);export{Kn as component,Qn as universal};
