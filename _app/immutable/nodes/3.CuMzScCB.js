import"../chunks/DsnmJJEf.js";import{I as lr,h as fe,e as ur,E as M,a6 as dr,K as cr,L as fr,M as Ot,n as nt,N as at,j as Pe,C as hr,aQ as vr,P as ut,R as pr,Q as Te,au as kt,O as Ft,_ as _r,as as Mt,aN as Ht,aI as zt,a_ as qe,S as Gt,T as gr,a$ as Be,b0 as yr,b1 as it,aC as Xt,k as mr,b2 as wr,aM as br,b3 as Cr,g as Sr,q as Ir,b4 as Wt,X as Er,b5 as xr,b6 as ht,V as Or,a0 as kr,b7 as Mr,b8 as Tr,an as $r,A as Ut,W as jt,b9 as Nr,p as Oe,f as B,s as H,d as L,r as R,b as F,c as ke,ao as $e,a as _e,t as ge,ap as je,ba as Ar,w as Je,am as be,a1 as ue,a7 as Dr,z as vt,bb as Rr,v as Pr,$ as Lr,aq as Tt}from"../chunks/CrNHeh_q.js";import{s as Ce,d as pt,o as Fr,w as Hr,g as $t}from"../chunks/DE1QlgkD.js";import{i as re,p as Ue,b as zr,s as Gr,a as Xr}from"../chunks/C9uMbrzX.js";import{r as Ze,a as Nt,c as Wr,l as Ur}from"../chunks/Cpp1glqQ.js";import{h as Ge}from"../chunks/DMB1Uyw7.js";function Ne(t,e){return e}function jr(t,e,r){for(var a=t.items,o=[],s=e.length,u=0;u<s;u++)wr(e[u].e,o,!0);var d=s>0&&o.length===0&&r!==null;if(d){var f=r.parentNode;br(f),f.append(r),a.clear(),pe(t,e[0].prev,e[s-1].next)}Cr(o,()=>{for(var p=0;p<s;p++){var _=e[p];d||(a.delete(_.k),pe(t,_.prev,_.next)),Xt(_.e,!d)}})}function Ae(t,e,r,a,o,s=null){var u=t,d={flags:e,items:new Map,first:null},f=(e&Wt)!==0;if(f){var p=t;u=fe?nt(Ir(p)):p.appendChild(Ft())}fe&&ur();var _=null,C=!1,T=new Map,I=dr(()=>{var $=r();return zt($)?$:$==null?[]:Ht($)}),g,S;function O(){Vr(S,g,d,T,u,o,e,a,r),s!==null&&(g.length===0?_?Gt(_):_=ut(()=>s(u)):_!==null&&gr(_,()=>{_=null}))}lr(()=>{S??=Sr,g=M(I);var $=g.length;if(C&&$===0)return;C=$===0;let G=!1;if(fe){var J=cr(u)===fr;J!==($===0)&&(u=Ot(),nt(u),at(!1),G=!0)}if(fe){for(var j=null,z,x=0;x<$;x++){if(Pe.nodeType===hr&&Pe.data===vr){u=Pe,G=!0,at(!1);break}var A=g[x],U=a(A,x);z=dt(Pe,d,j,null,A,U,x,o,e,r),d.items.set(U,z),j=z}$>0&&nt(Ot())}if(fe)$===0&&s&&(_=ut(()=>s(u)));else if(pr()){var se=new Set,oe=Te;for(x=0;x<$;x+=1){A=g[x],U=a(A,x);var b=d.items.get(U)??T.get(U);b?(e&(Be|qe))!==0&&Vt(b,A,x,e):(z=dt(null,d,null,null,A,U,x,o,e,r,!0),T.set(U,z)),se.add(U)}for(const[k,P]of d.items)se.has(k)||oe.skipped_effects.add(P.e);oe.add_callback(O)}else O();G&&at(!0),M(I)}),fe&&(u=Pe)}function Vr(t,e,r,a,o,s,u,d,f){var p=(u&xr)!==0,_=(u&(Be|qe))!==0,C=e.length,T=r.items,I=r.first,g=I,S,O=null,$,G=[],J=[],j,z,x,A;if(p)for(A=0;A<C;A+=1)j=e[A],z=d(j,A),x=T.get(z),x!==void 0&&(x.a?.measure(),($??=new Set).add(x));for(A=0;A<C;A+=1){if(j=e[A],z=d(j,A),x=T.get(z),x===void 0){var U=a.get(z);if(U!==void 0){a.delete(z),T.set(z,U);var se=O?O.next:g;pe(r,O,U),pe(r,U,se),st(U,se,o),O=U}else{var oe=g?g.e.nodes_start:o;O=dt(oe,r,O,O===null?r.first:O.next,j,z,A,s,u,f)}T.set(z,O),G=[],J=[],g=O.next;continue}if(_&&Vt(x,j,A,u),(x.e.f&it)!==0&&(Gt(x.e),p&&(x.a?.unfix(),($??=new Set).delete(x))),x!==g){if(S!==void 0&&S.has(x)){if(G.length<J.length){var b=J[0],k;O=b.prev;var P=G[0],X=G[G.length-1];for(k=0;k<G.length;k+=1)st(G[k],b,o);for(k=0;k<J.length;k+=1)S.delete(J[k]);pe(r,P.prev,X.next),pe(r,O,P),pe(r,X,b),g=b,O=X,A-=1,G=[],J=[]}else S.delete(x),st(x,g,o),pe(r,x.prev,x.next),pe(r,x,O===null?r.first:O.next),pe(r,O,x),O=x;continue}for(G=[],J=[];g!==null&&g.k!==z;)(g.e.f&it)===0&&(S??=new Set).add(g),J.push(g),g=g.next;if(g===null)continue;x=g}G.push(x),O=x,g=x.next}if(g!==null||S!==void 0){for(var ne=S===void 0?[]:Ht(S);g!==null;)(g.e.f&it)===0&&ne.push(g),g=g.next;var V=ne.length;if(V>0){var le=(u&Wt)!==0&&C===0?o:null;if(p){for(A=0;A<V;A+=1)ne[A].a?.measure();for(A=0;A<V;A+=1)ne[A].a?.fix()}jr(r,ne,le)}}p&&Er(()=>{if($!==void 0)for(x of $)x.a?.apply()}),t.first=r.first&&r.first.e,t.last=O&&O.e;for(var te of a.values())Xt(te.e);a.clear()}function Vt(t,e,r,a){(a&Be)!==0&&kt(t.v,e),(a&qe)!==0?kt(t.i,r):t.i=r}function dt(t,e,r,a,o,s,u,d,f,p,_){var C=(f&Be)!==0,T=(f&yr)===0,I=C?T?_r(o,!1,!1):Mt(o):o,g=(f&qe)===0?u:Mt(u),S={i:g,v:I,k:s,a:null,e:null,prev:r,next:a};try{if(t===null){var O=document.createDocumentFragment();O.append(t=Ft())}return S.e=ut(()=>d(t,I,g,p),fe),S.e.prev=r&&r.e,S.e.next=a&&a.e,r===null?_||(e.first=S):(r.next=S,r.e.next=S.e),a!==null&&(a.prev=S,a.e.prev=S.e),S}finally{}}function st(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,o=e?e.e.nodes_start:r,s=t.e.nodes_start;s!==null&&s!==a;){var u=mr(s);o.before(s),s=u}}function pe(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Yr(t,e){return t==null?null:String(t)}function qr(t,e,r,a){var o=t.__style;if(fe||o!==e){var s=Yr(e);(!fe||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}return a}function Yt(t,e,r=!1){if(t.multiple){if(e==null)return;if(!zt(e))return Mr();for(var a of t.options)a.selected=e.includes(He(a));return}for(a of t.options){var o=He(a);if(Tr(o,e)){a.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Br(t){var e=new MutationObserver(()=>{Yt(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),kr(()=>{e.disconnect()})}function Jr(t,e,r=e){var a=!0;ht(t,"change",o=>{var s=o?"[selected]":":checked",u;if(t.multiple)u=[].map.call(t.querySelectorAll(s),He);else{var d=t.querySelector(s)??t.querySelector("option:not([disabled])");u=d&&He(d)}r(u)}),Or(()=>{var o=e();if(Yt(t,o,a),a&&o===void 0){var s=t.querySelector(":checked");s!==null&&(o=He(s),r(o))}t.__value=o,a=!1}),Br(t)}function He(t){return"__value"in t?t.__value:t.value}function Zr(t,e,r=e){var a=new WeakSet;ht(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=ot(t)?lt(s):s,r(s),Te!==null&&a.add(Te),await $r(),s!==(s=e())){var u=t.selectionStart,d=t.selectionEnd;t.value=s??"",d!==null&&(t.selectionStart=u,t.selectionEnd=Math.min(d,t.value.length))}}),(fe&&t.defaultValue!==t.value||Ut(e)==null&&t.value)&&(r(ot(t)?lt(t.value):t.value),Te!==null&&a.add(Te)),jt(()=>{var o=e();if(t===document.activeElement){var s=Nr??Te;if(a.has(s))return}ot(t)&&o===lt(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Qe(t,e,r=e){ht(t,"change",a=>{var o=a?t.defaultChecked:t.checked;r(o)}),(fe&&t.defaultChecked!==t.checked||Ut(e)==null)&&r(t.checked),jt(()=>{var a=e();t.checked=!!a})}function ot(t){var e=t.type;return e==="number"||e==="range"}function lt(t){return t===""?null:+t}const Qr=!0,Qn=Object.freeze(Object.defineProperty({__proto__:null,prerender:Qr},Symbol.toStringTag,{value:"Module"})),ze="unsolvable";var Kr=B("<p>The 3CNF formula is unsatisfiable.</p>"),en=B("<div> </div>"),tn=B("<main><h2>CertRenderer 3SAT</h2> <!></main>");function rn(t,e){Oe(e,!0);var r=tn(),a=H(L(r),2);{var o=u=>{var d=Kr();F(u,d)},s=u=>{var d=$e(),f=_e(d);Ae(f,17,()=>e.cert.assignments,Ne,(p,_)=>{var C=je(()=>Ar(M(_),2));let T=()=>M(C)[0],I=()=>M(C)[1];var g=en(),S=L(g);R(g),ge(()=>Ce(S,`${T()??""} â‰” ${I()==!0?"T":I()==!1?"F":"Either"}`)),F(p,g)}),F(u,d)};re(a,u=>{e.cert==ze?u(o):u(s,!1)})}R(r),F(t,r),ke()}var nn=B("<p>The graph doesn't contain a hamiltonian cycle.</p>"),an=B("<li> </li>"),sn=B("<ol></ol>"),on=B("<span><!> </span>"),ln=B("<div></div>"),un=B('<div class="controls"><input type="checkbox" name="showAsListCheckbox"/> <label for="showAsListCheckbox">Show as list</label></div> <!>',1),dn=B("<main><h2>CertRenderer HCYCLE</h2> <!></main>");function cn(t,e){Oe(e,!0);let r=be(!0);var a=dn(),o=H(L(a),2);{var s=d=>{var f=nn();F(d,f)},u=d=>{var f=un(),p=_e(f),_=L(p);Ze(_),Je(2),R(p);var C=H(p,2);{var T=g=>{var S=sn();Ae(S,21,()=>e.cert.path,Ne,(O,$)=>{var G=an(),J=L(G,!0);R(G),ge(()=>Ce(J,M($).id)),F(O,G)}),R(S),F(g,S)},I=g=>{var S=ln();Ae(S,21,()=>e.cert.path,Ne,(O,$,G)=>{var J=on(),j=L(J);Ge(j,()=>G!=0?"&ThinSpace;&LongRightArrow;&ThinSpace;":"");var z=H(j);R(J),ge(()=>Ce(z,` ${M($).id??""}`)),F(O,J)}),R(S),F(g,S)};re(C,g=>{M(r)?g(T):g(I,!1)})}Qe(_,()=>M(r),g=>ue(r,g)),F(d,f)};re(o,d=>{e.cert==ze?d(s):d(u,!1)})}R(a),F(t,a),ke()}class fn extends Error{}function qt(t,e){if(!t)throw new fn("[ASSERT] "+e)}function hn(t,e,r){return r.indexOf(t)===e}class W{static SerializableClass(){return function(e){const r=e.name;e.prototype.__type=r,W.registerClass(r,e)}}static serialize(e){if(e==null)return e;if(Array.isArray(e))return e.map(W.serialize);if(e instanceof Set)return{__type:"Set",values:Array.from(e).map(W.serialize)};if(e instanceof Map)return{__type:"Map",entries:Array.from(e.entries()).map(([r,a])=>[W.serialize(r),W.serialize(a)])};if(typeof e=="object"){if(Array.isArray(e))return e.map(W.serialize);const r=e.constructor,o={__type:e.__type??r.name};for(const[s,u]of Object.entries(e))o[s]=W.serialize(u);return o}return e}static revive(e){if(e==null)return e;if(Array.isArray(e))return e.map(W.revive);if(e.__type==="Set")return new Set(e.values.map(W.revive));if(e.__type==="Map")return new Map(e.entries.map(([r,a])=>[W.revive(r),W.revive(a)]));if(e.__type){const r=W.getClass(e.__type);if(!r)throw new Error(`Serializer - Unknown class: ${e.__type}`);const a=Object.create(r.prototype);for(const[o,s]of Object.entries(e))o!=="__type"&&(a[o]=W.revive(s));return a}return e}static registerClass(e,r){W.classRegistry.set(e,r)}static getClass(e){return W.classRegistry.get(e)}static classRegistry=new Map}W.registerClass(Object.name,Object);class Bt{}var At={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Dt;function vn(){if(Dt)return At;Dt=1;var t;return(function(e){(function(r){var a=typeof globalThis=="object"?globalThis:typeof Nt=="object"?Nt:typeof self=="object"?self:typeof this=="object"?this:f(),o=s(e);typeof a.Reflect<"u"&&(o=s(a.Reflect,o)),r(o,a),typeof a.Reflect>"u"&&(a.Reflect=e);function s(p,_){return function(C,T){Object.defineProperty(p,C,{configurable:!0,writable:!0,value:T}),_&&_(C,T)}}function u(){try{return Function("return this;")()}catch{}}function d(){try{return(0,eval)("(function() { return this; })()")}catch{}}function f(){return u()||d()}})(function(r,a){var o=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",u=s&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",d=s&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",f=typeof Object.create=="function",p={__proto__:[]}instanceof Array,_=!f&&!p,C={create:f?function(){return rt(Object.create(null))}:p?function(){return rt({__proto__:null})}:function(){return rt({})},has:_?function(n,i){return o.call(n,i)}:function(n,i){return i in n},get:_?function(n,i){return o.call(n,i)?n[i]:void 0}:function(n,i){return n[i]}},T=Object.getPrototypeOf(Function),I=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:nr(),g=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ar(),S=typeof WeakMap=="function"?WeakMap:ir(),O=s?Symbol.for("@reflect-metadata:registry"):void 0,$=er(),G=tr($);function J(n,i,l,c){if(v(l)){if(!mt(n))throw new TypeError;if(!wt(i))throw new TypeError;return P(n,i)}else{if(!mt(n))throw new TypeError;if(!Z(i))throw new TypeError;if(!Z(c)&&!v(c)&&!de(c))throw new TypeError;return de(c)&&(c=void 0),l=ve(l),X(n,i,l,c)}}r("decorate",J);function j(n,i){function l(c,E){if(!Z(c))throw new TypeError;if(!v(E)&&!Qt(E))throw new TypeError;Y(n,i,c,E)}return l}r("metadata",j);function z(n,i,l,c){if(!Z(l))throw new TypeError;return v(c)||(c=ve(c)),Y(n,i,l,c)}r("defineMetadata",z);function x(n,i,l){if(!Z(i))throw new TypeError;return v(l)||(l=ve(l)),ne(n,i,l)}r("hasMetadata",x);function A(n,i,l){if(!Z(i))throw new TypeError;return v(l)||(l=ve(l)),V(n,i,l)}r("hasOwnMetadata",A);function U(n,i,l){if(!Z(i))throw new TypeError;return v(l)||(l=ve(l)),le(n,i,l)}r("getMetadata",U);function se(n,i,l){if(!Z(i))throw new TypeError;return v(l)||(l=ve(l)),te(n,i,l)}r("getOwnMetadata",se);function oe(n,i){if(!Z(n))throw new TypeError;return v(i)||(i=ve(i)),he(n,i)}r("getMetadataKeys",oe);function b(n,i){if(!Z(n))throw new TypeError;return v(i)||(i=ve(i)),ye(n,i)}r("getOwnMetadataKeys",b);function k(n,i,l){if(!Z(i))throw new TypeError;if(v(l)||(l=ve(l)),!Z(i))throw new TypeError;v(l)||(l=ve(l));var c=Re(i,l,!1);return v(c)?!1:c.OrdinaryDeleteMetadata(n,i,l)}r("deleteMetadata",k);function P(n,i){for(var l=n.length-1;l>=0;--l){var c=n[l],E=c(i);if(!v(E)&&!de(E)){if(!wt(E))throw new TypeError;i=E}}return i}function X(n,i,l,c){for(var E=n.length-1;E>=0;--E){var Q=n[E],ee=Q(i,l,c);if(!v(ee)&&!de(ee)){if(!Z(ee))throw new TypeError;c=ee}}return c}function ne(n,i,l){var c=V(n,i,l);if(c)return!0;var E=tt(i);return de(E)?!1:ne(n,E,l)}function V(n,i,l){var c=Re(i,l,!1);return v(c)?!1:yt(c.OrdinaryHasOwnMetadata(n,i,l))}function le(n,i,l){var c=V(n,i,l);if(c)return te(n,i,l);var E=tt(i);if(!de(E))return le(n,E,l)}function te(n,i,l){var c=Re(i,l,!1);if(!v(c))return c.OrdinaryGetOwnMetadata(n,i,l)}function Y(n,i,l,c){var E=Re(l,c,!0);E.OrdinaryDefineOwnMetadata(n,i,l,c)}function he(n,i){var l=ye(n,i),c=tt(n);if(c===null)return l;var E=he(c,i);if(E.length<=0)return l;if(l.length<=0)return E;for(var Q=new g,ee=[],N=0,h=l;N<h.length;N++){var y=h[N],m=Q.has(y);m||(Q.add(y),ee.push(y))}for(var w=0,D=E;w<D.length;w++){var y=D[w],m=Q.has(y);m||(Q.add(y),ee.push(y))}return ee}function ye(n,i){var l=Re(n,i,!1);return l?l.OrdinaryOwnMetadataKeys(n,i):[]}function me(n){if(n===null)return 1;switch(typeof n){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return n===null?1:6;default:return 6}}function v(n){return n===void 0}function de(n){return n===null}function Ke(n){return typeof n=="symbol"}function Z(n){return typeof n=="object"?n!==null:typeof n=="function"}function ie(n,i){switch(me(n)){case 0:return n;case 1:return n;case 2:return n;case 3:return n;case 4:return n;case 5:return n}var l="string",c=bt(n,u);if(c!==void 0){var E=c.call(n,l);if(Z(E))throw new TypeError;return E}return Jt(n)}function Jt(n,i){var l,c,E;{var Q=n.toString;if(We(Q)){var c=Q.call(n);if(!Z(c))return c}var l=n.valueOf;if(We(l)){var c=l.call(n);if(!Z(c))return c}}throw new TypeError}function yt(n){return!!n}function Zt(n){return""+n}function ve(n){var i=ie(n);return Ke(i)?i:Zt(i)}function mt(n){return Array.isArray?Array.isArray(n):n instanceof Object?n instanceof Array:Object.prototype.toString.call(n)==="[object Array]"}function We(n){return typeof n=="function"}function wt(n){return typeof n=="function"}function Qt(n){switch(me(n)){case 3:return!0;case 4:return!0;default:return!1}}function et(n,i){return n===i||n!==n&&i!==i}function bt(n,i){var l=n[i];if(l!=null){if(!We(l))throw new TypeError;return l}}function Ct(n){var i=bt(n,d);if(!We(i))throw new TypeError;var l=i.call(n);if(!Z(l))throw new TypeError;return l}function St(n){return n.value}function It(n){var i=n.next();return i.done?!1:i}function Et(n){var i=n.return;i&&i.call(n)}function tt(n){var i=Object.getPrototypeOf(n);if(typeof n!="function"||n===T||i!==T)return i;var l=n.prototype,c=l&&Object.getPrototypeOf(l);if(c==null||c===Object.prototype)return i;var E=c.constructor;return typeof E!="function"||E===n?i:E}function Kt(){var n;!v(O)&&typeof a.Reflect<"u"&&!(O in a.Reflect)&&typeof a.Reflect.defineMetadata=="function"&&(n=rr(a.Reflect));var i,l,c,E=new S,Q={registerProvider:ee,getProvider:h,setProvider:m};return Q;function ee(w){if(!Object.isExtensible(Q))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case n===w:break;case v(i):i=w;break;case i===w:break;case v(l):l=w;break;case l===w:break;default:c===void 0&&(c=new g),c.add(w);break}}function N(w,D){if(!v(i)){if(i.isProviderFor(w,D))return i;if(!v(l)){if(l.isProviderFor(w,D))return i;if(!v(c))for(var q=Ct(c);;){var K=It(q);if(!K)return;var ce=St(K);if(ce.isProviderFor(w,D))return Et(q),ce}}}if(!v(n)&&n.isProviderFor(w,D))return n}function h(w,D){var q=E.get(w),K;return v(q)||(K=q.get(D)),v(K)&&(K=N(w,D),v(K)||(v(q)&&(q=new I,E.set(w,q)),q.set(D,K))),K}function y(w){if(v(w))throw new TypeError;return i===w||l===w||!v(c)&&c.has(w)}function m(w,D,q){if(!y(q))throw new Error("Metadata provider not registered.");var K=h(w,D);if(K!==q){if(!v(K))return!1;var ce=E.get(w);v(ce)&&(ce=new I,E.set(w,ce)),ce.set(D,q)}return!0}}function er(){var n;return!v(O)&&Z(a.Reflect)&&Object.isExtensible(a.Reflect)&&(n=a.Reflect[O]),v(n)&&(n=Kt()),!v(O)&&Z(a.Reflect)&&Object.isExtensible(a.Reflect)&&Object.defineProperty(a.Reflect,O,{enumerable:!1,configurable:!1,writable:!1,value:n}),n}function tr(n){var i=new S,l={isProviderFor:function(y,m){var w=i.get(y);return v(w)?!1:w.has(m)},OrdinaryDefineOwnMetadata:ee,OrdinaryHasOwnMetadata:E,OrdinaryGetOwnMetadata:Q,OrdinaryOwnMetadataKeys:N,OrdinaryDeleteMetadata:h};return $.registerProvider(l),l;function c(y,m,w){var D=i.get(y),q=!1;if(v(D)){if(!w)return;D=new I,i.set(y,D),q=!0}var K=D.get(m);if(v(K)){if(!w)return;if(K=new I,D.set(m,K),!n.setProvider(y,m,l))throw D.delete(m),q&&i.delete(y),new Error("Wrong provider for target.")}return K}function E(y,m,w){var D=c(m,w,!1);return v(D)?!1:yt(D.has(y))}function Q(y,m,w){var D=c(m,w,!1);if(!v(D))return D.get(y)}function ee(y,m,w,D){var q=c(w,D,!0);q.set(y,m)}function N(y,m){var w=[],D=c(y,m,!1);if(v(D))return w;for(var q=D.keys(),K=Ct(q),ce=0;;){var xt=It(K);if(!xt)return w.length=ce,w;var sr=St(xt);try{w[ce]=sr}catch(or){try{Et(K)}finally{throw or}}ce++}}function h(y,m,w){var D=c(m,w,!1);if(v(D)||!D.delete(y))return!1;if(D.size===0){var q=i.get(m);v(q)||(q.delete(w),q.size===0&&i.delete(q))}return!0}}function rr(n){var i=n.defineMetadata,l=n.hasOwnMetadata,c=n.getOwnMetadata,E=n.getOwnMetadataKeys,Q=n.deleteMetadata,ee=new S,N={isProviderFor:function(h,y){var m=ee.get(h);return!v(m)&&m.has(y)?!0:E(h,y).length?(v(m)&&(m=new g,ee.set(h,m)),m.add(y),!0):!1},OrdinaryDefineOwnMetadata:i,OrdinaryHasOwnMetadata:l,OrdinaryGetOwnMetadata:c,OrdinaryOwnMetadataKeys:E,OrdinaryDeleteMetadata:Q};return N}function Re(n,i,l){var c=$.getProvider(n,i);if(!v(c))return c;if(l){if($.setProvider(n,i,G))return G;throw new Error("Illegal state.")}}function nr(){var n={},i=[],l=(function(){function N(h,y,m){this._index=0,this._keys=h,this._values=y,this._selector=m}return N.prototype["@@iterator"]=function(){return this},N.prototype[d]=function(){return this},N.prototype.next=function(){var h=this._index;if(h>=0&&h<this._keys.length){var y=this._selector(this._keys[h],this._values[h]);return h+1>=this._keys.length?(this._index=-1,this._keys=i,this._values=i):this._index++,{value:y,done:!1}}return{value:void 0,done:!0}},N.prototype.throw=function(h){throw this._index>=0&&(this._index=-1,this._keys=i,this._values=i),h},N.prototype.return=function(h){return this._index>=0&&(this._index=-1,this._keys=i,this._values=i),{value:h,done:!0}},N})(),c=(function(){function N(){this._keys=[],this._values=[],this._cacheKey=n,this._cacheIndex=-2}return Object.defineProperty(N.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),N.prototype.has=function(h){return this._find(h,!1)>=0},N.prototype.get=function(h){var y=this._find(h,!1);return y>=0?this._values[y]:void 0},N.prototype.set=function(h,y){var m=this._find(h,!0);return this._values[m]=y,this},N.prototype.delete=function(h){var y=this._find(h,!1);if(y>=0){for(var m=this._keys.length,w=y+1;w<m;w++)this._keys[w-1]=this._keys[w],this._values[w-1]=this._values[w];return this._keys.length--,this._values.length--,et(h,this._cacheKey)&&(this._cacheKey=n,this._cacheIndex=-2),!0}return!1},N.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=n,this._cacheIndex=-2},N.prototype.keys=function(){return new l(this._keys,this._values,E)},N.prototype.values=function(){return new l(this._keys,this._values,Q)},N.prototype.entries=function(){return new l(this._keys,this._values,ee)},N.prototype["@@iterator"]=function(){return this.entries()},N.prototype[d]=function(){return this.entries()},N.prototype._find=function(h,y){if(!et(this._cacheKey,h)){this._cacheIndex=-1;for(var m=0;m<this._keys.length;m++)if(et(this._keys[m],h)){this._cacheIndex=m;break}}return this._cacheIndex<0&&y&&(this._cacheIndex=this._keys.length,this._keys.push(h),this._values.push(void 0)),this._cacheIndex},N})();return c;function E(N,h){return N}function Q(N,h){return h}function ee(N,h){return[N,h]}}function ar(){var n=(function(){function i(){this._map=new I}return Object.defineProperty(i.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),i.prototype.has=function(l){return this._map.has(l)},i.prototype.add=function(l){return this._map.set(l,l),this},i.prototype.delete=function(l){return this._map.delete(l)},i.prototype.clear=function(){this._map.clear()},i.prototype.keys=function(){return this._map.keys()},i.prototype.values=function(){return this._map.keys()},i.prototype.entries=function(){return this._map.entries()},i.prototype["@@iterator"]=function(){return this.keys()},i.prototype[d]=function(){return this.keys()},i})();return n}function ir(){var n=16,i=C.create(),l=c();return(function(){function h(){this._key=c()}return h.prototype.has=function(y){var m=E(y,!1);return m!==void 0?C.has(m,this._key):!1},h.prototype.get=function(y){var m=E(y,!1);return m!==void 0?C.get(m,this._key):void 0},h.prototype.set=function(y,m){var w=E(y,!0);return w[this._key]=m,this},h.prototype.delete=function(y){var m=E(y,!1);return m!==void 0?delete m[this._key]:!1},h.prototype.clear=function(){this._key=c()},h})();function c(){var h;do h="@@WeakMap@@"+N();while(C.has(i,h));return i[h]=!0,h}function E(h,y){if(!o.call(h,l)){if(!y)return;Object.defineProperty(h,l,{value:C.create()})}return h[l]}function Q(h,y){for(var m=0;m<y;++m)h[m]=Math.random()*255|0;return h}function ee(h){if(typeof Uint8Array=="function"){var y=new Uint8Array(h);return typeof crypto<"u"?crypto.getRandomValues(y):typeof msCrypto<"u"?msCrypto.getRandomValues(y):Q(y,h),y}return Q(new Array(h),h)}function N(){var h=ee(n);h[6]=h[6]&79|64,h[8]=h[8]&191|128;for(var y="",m=0;m<n;++m){var w=h[m];(m===4||m===6||m===8)&&(y+="-"),w<16&&(y+="0"),y+=w.toString(16).toLowerCase()}return y}}function rt(n){return n.__=void 0,delete n.__,n}})})(t||(t={})),At}vn();var pn=Object.getOwnPropertyDescriptor,_t=(t,e,r,a)=>{for(var o=a>1?void 0:a?pn(e,r):e,s=t.length-1,u;s>=0;s--)(u=t[s])&&(o=u(o)||o);return o};let Ve=class{id;varName;negated;constructor(t,e,r=!1){this.id=t,this.varName=e,this.negated=r}toJson(){return{__type:Ve.name,id:this.id,varName:this.varName,negated:this.negated}}asString(){return`${this.negated?"!":""}${this.varName}`}asHtmlString(){return(this.negated?"&not;":"")+this.varName}};Ve=_t([W.SerializableClass()],Ve);let Ye=class{id;literals;constructor(t,e){qt(e.length==3),this.id=t,this.literals=[e[0],e[1],e[2]]}asString(){return this.literals.map(t=>t.asString()).join(" ")}asHtmlString(){return"("+this.literals.map(e=>e.asHtmlString()).join("&or;")+")"}toJSON(){return{__type:Ye.name,id:this.id,literals:this.literals}}};Ye=_t([W.SerializableClass()],Ye);let De=class extends Bt{_variables=new Set;_clauses=new Set;addVariable(t){this._variables.add(t)}addClause(t){this._clauses.add(t),t.literals.forEach(e=>this.addVariable(e.varName))}asString(){return Array.from(this._clauses.values()).map(t=>t.asString()).join(`
`)}asHtmlString(){return this.clauses.map(t=>t.asHtmlString()).join("&and;")}get variables(){return Array.from(this._variables.values())}get clauses(){return Array.from(this._clauses.values())}empty(){const t=this.clauses.length==0||this.variables.length==0;return console.debug("empty",t),t}static fromString(t){const e=t.split(`
`).map(a=>a.trim()).filter(a=>a.length).filter(hn);let r=new De;for(let a=0;a<e.length;a++){const o=e[a],s=o.split(" ").map(f=>f.trim()).filter(f=>f.length);if(s.length!=3)return`Clause number ${a+1} (${o}) doesn't have exactly 3 literals. Instead it has ${s.length} literals.`;let u=[];for(let f=0;f<s.length;f++){let p=s[f];const _=p.startsWith("!");if(_&&(p=p.replace("!","")),p.includes("!")||p.includes("||")||p.includes("&&"))return`Literal ${_?"!":""}${p} is invalid.`;const C=new Ve(`v:${f}-c:${a}`,p,_);u.push(C)}qt(u.length==3);const d=new Ye(`c:${a}`,u);r.addClause(d)}return r}};De=_t([W.SerializableClass()],De);class gt{static cnf3TextInput={NO_SOLUTION:`x y z
!x y z
x !y z
!x !y z
x y !z
!x y !z
x !y !z
!x !y !z
`,BASIC:`x y z
a b c
`};static getTextInputs(e){if(e===De)return gt.cnf3TextInput;throw new Error(`No demos provided for class ${e.name}.`)}}function _n(t,e,r,a,o){ue(e,r[M(a)],!0),o()}var gn=B("<option> </option>"),yn=B(`<div class="cnf-editor"><h2>CNF Editor</h2> <p><i>Removes duplicate clauses automatically.</i></p> <textarea class="svelte-whqlb8">
    </textarea> <select><option>--Choose a demo--</option><!></select></div>`);function mn(t,e){Oe(e,!0);const r=gt.getTextInputs(De);let a=be(Dr(e.cnf?.asString()??"")),o=be("");const s=I=>{e.onChange&&e.onChange(I)},u=I=>{e.onWrongFormat&&e.onWrongFormat(I)},d=()=>{const I=De.fromString(M(a));if(typeof I=="string"){u(I);return}s(I)};vt(()=>{e.cnf&&ue(a,e.cnf.asString(),!0)});var f=yn(),p=H(L(f),4);Rr(p),p.__change=d;var _=H(p,2);_.__change=[_n,a,r,o,d];var C=L(_);C.value=C.__value="";var T=H(C);Ae(T,17,()=>Object.keys(r),Ne,(I,g)=>{var S=gn(),O=L(S,!0);R(S);var $={};ge(()=>{Ce(O,M(g)),$!==($=M(g))&&(S.value=(S.__value=M(g))??"")}),F(I,S)}),R(_),R(f),Zr(p,()=>M(a),I=>ue(a,I)),Jr(_,()=>M(o),I=>ue(o,I)),F(t,f),ke()}pt(["change"]);function wn(t,e,r){e()&&r.stepIndex>0&&e()()}function bn(t,e,r,a){e()&&r.stepIndex<a-1&&e()()}var Cn=B("<h3> </h3> <p><!></p> <!>",1),Sn=B("<h3> </h3> <p><!></p>",1),In=B('<section><div class="header svelte-bomf3d"><h2>Reduction Stepper</h2> <div class="controls"><div><input type="checkbox" name="showAllCheckbox"/> <label for="showAllCheckbox">Show all</label></div> <div><button>Previous</button> <button>Next</button> <span> </span></div></div></div> <!></section>');function En(t,e){Oe(e,!0);let r=Ue(e,"indent",3,0),a=Ue(e,"onNextClick",3,void 0),o=Ue(e,"onPrevClick",3,void 0);const s=e.steps.length;let u=be(!1);var d=In(),f=L(d),p=H(L(f),2),_=L(p),C=L(_);Ze(C),Je(2),R(_);var T=H(_,2),I=L(T);I.__click=[wn,o,e];var g=H(I,2);g.__click=[bn,a,e,s];var S=H(g,2),O=L(S);R(S),R(T),R(p),R(f);var $=H(f,2);{var G=j=>{var z=$e(),x=_e(z);Ae(x,17,()=>e.steps,Ne,(A,U,se)=>{var oe=Cn(),b=_e(oe),k=L(b);R(b);var P=H(b,2),X=L(P);Ge(X,()=>M(U).description),R(P);var ne=H(P,2);re(ne,V=>{}),ge(()=>Ce(k,`Step #${se+1}: ${M(U).title??""}`)),F(A,oe)}),F(j,z)},J=j=>{var z=$e(),x=_e(z);{var A=U=>{const se=je(()=>e.steps[e.stepIndex]);var oe=Sn(),b=_e(oe),k=L(b);R(b);var P=H(b,2),X=L(P);Ge(X,()=>M(se).description),R(P),ge(()=>Ce(k,`Step #${e.stepIndex+1}: ${M(se).title??""}`)),F(U,oe)};re(x,U=>{e.stepIndex<e.steps.length&&U(A)})}F(j,z)};re($,j=>{M(u)?j(G):j(J,!1)})}R(d),ge(()=>{qr(d,`padding-left: ${r()*100}px; border: solid black 1px`),Ce(O,`${e.stepIndex+1}/${s??""}`)}),Qe(C,()=>M(u),j=>ue(u,j)),F(t,d),ke()}pt(["click"]);var xn=B('<div class="clause svelte-z6uwnm"><!></div>'),On=B('<div class="cnf-renderer"><h2>CNF Renderer</h2> <div><input type="checkbox" name="viewAsColumnCheckbox"/> <label for="viewAsColumnCheckbox">View as column</label></div> <!></div>');function Rt(t,e){Oe(e,!0);let r=be(!1);var a=On(),o=H(L(a),2),s=L(o);Ze(s),Je(2),R(o);var u=H(o,2);{var d=p=>{var _=$e(),C=_e(_);Ae(C,17,()=>e.cnf.clauses,Ne,(T,I)=>{var g=xn(),S=L(g);Ge(S,()=>M(I).asHtmlString()),R(g),F(T,g)}),F(p,_)},f=p=>{var _=$e(),C=_e(_);Ge(C,()=>e.cnf.asHtmlString()),F(p,_)};re(u,p=>{M(r)?p(d):p(f,!1)})}R(a),Qe(s,()=>M(r),p=>ue(r,p)),F(t,a),ke()}const Pt={DEFAULT_STYLE:[{selector:"node",style:{label:"data(id)","text-valign":"top",color:"#000","background-color":"#61bffc","text-outline-color":"#fff","text-outline-width":2,"border-color":"black","border-style":"solid","border-width":2}},{selector:"edge",style:{"curve-style":"bezier","line-color":"black",width:2}}],"3SAT-HCYCLE":[{selector:"node",style:{label:"data(id)","font-size":12,"text-valign":"top","background-color":"blue","border-color":"black","border-style":"solid","border-width":2}},{selector:"node.true",style:{"background-color":"green"}},{selector:"node.false",style:{"background-color":"red"}},{selector:"node.source, node.inbetween, node.target",style:{"background-color":"white","border-style":"solid","border-color":"black"}},{selector:"node.clause",style:{"background-color":"orange"}},{selector:"node.guarantee",style:{opacity:.5}},{selector:"edge",style:{"line-color":"black","target-arrow-color":"black","target-arrow-shape":"chevron","curve-style":"bezier","arrow-scale":1}},{selector:"edge.muted",style:{"line-opacity":.2,"line-color":"black"}},{selector:"edge.clause",style:{"curve-style":"bezier",width:3,"line-opacity":1,"arrow-scale":2}},{selector:"edge.true_in",style:{"target-arrow-color":"green","line-color":"green","line-style":"dashed"}},{selector:"edge.true_out",style:{"target-arrow-color":"green","line-color":"green"}},{selector:"edge.false_in",style:{"target-arrow-color":"red","line-color":"red","line-style":"dashed"}},{selector:"edge.false_out",style:{"target-arrow-color":"red","line-color":"red"}},{selector:"edge.solved",style:{"line-opacity":.2}},{selector:"edge.solved.used",style:{"line-opacity":1}}]};var kn=B('<section><h2>Graph Renderer</h2> <div id="cy" class="svelte-ovjh18"></div></section>');function Lt(t,e){Oe(e,!0);let r=Ue(e,"style",3,"DEFAULT_STYLE"),a,o;vt(()=>{const d=e.graph.nodes.map(C=>({data:{id:C.id,label:C.id},position:C.position,classes:C.classes})),f=e.graph.edges.map(C=>({data:{id:C.id,source:C.from,target:C.to},classes:C.classes})),p=o?o.pan():{x:0,y:0},_=o?o.zoom():1;o?o.elements().remove():o=Wr({container:a,wheelSensitivity:5,style:Pt[r()]}),o.add([...d,...f]),o.style(Pt[r()]),o.zoom(_),o.pan(p)});var s=kn(),u=H(L(s),2);zr(u,d=>a=d,()=>a),R(s),F(t,s),ke()}const Mn=":",Me="n:",we="n%:",ae="e:",Se="source",Ie="target",Le="n%c:",Fe="n%i:",Ee="n%t:",xe="n%f:";function Tn(t,e,r={serialize:a=>W.serialize(a),revive:a=>W.revive(a)}){let a=Hr(e);Fr(()=>{const s=localStorage.getItem(t);if(s){const u=r.revive(JSON.parse(s));a.set(u)}});const o=()=>{if($t(a)){const s=JSON.stringify(r.serialize($t(a)));localStorage.setItem(t,s)}else localStorage.removeItem(t)};return{value:a,save:()=>o()}}var $n=Object.getOwnPropertyDescriptor,Nn=(t,e,r,a)=>{for(var o=a>1?void 0:a?$n(e,r):e,s=t.length-1,u;s>=0;s--)(u=t[s])&&(o=u(o)||o);return o};let ct=class{assignments;constructor(t){this.assignments=t}};ct=Nn([W.SerializableClass()],ct);class An{decode(e,r){const{path:a}=r,o=new Map;for(let s=0;s<a.length;s++){const u=a[s].id;if(u.startsWith(Ee)){const d=u.substring(Ee.length,u.lastIndexOf("_"));o.has(d)||o.set(d,!0)}else if(u.startsWith(xe)){const d=u.substring(xe.length,u.lastIndexOf("_"));o.has(d)||o.set(d,!1)}}return new ct(o)}}var Dn=Object.getOwnPropertyDescriptor,Rn=(t,e,r,a)=>{for(var o=a>1?void 0:a?Dn(e,r):e,s=t.length-1,u;s>=0;s--)(u=t[s])&&(o=u(o)||o);return o};let Xe=class extends Bt{_nodes;_edges;constructor(){super(),this._nodes=new Set,this._edges=new Set}addNode(t){t.classes==null&&(t.classes=""),this._nodes.add(t)}addEdge(t){t.classes==null&&(t.classes=""),this._edges.add(t)}get nodes(){return Array.from(this._nodes.values())}get edges(){return Array.from(this._edges.values())}removeNode(t){if(!this._nodes.has(t))return;this._nodes.delete(t),Array.from(this.edges).filter(r=>r.to===t.id||r.from===t.id).forEach(r=>this._edges.delete(r))}removeEdge(t){this._edges.delete(t)}empty(){return this.nodes.length==0||this.edges.length==0}copy(){const t=new Xe;for(const e of this._nodes)t.addNode({id:e.id,label:e.label,position:e.position?{...e.position}:void 0,classes:e.classes});for(const e of this._edges)t.addEdge({id:e.id,from:e.from,to:e.to,weight:e.weight,classes:e.classes});return t}toSerializedString(){return W.serialize(this)}static fromSerializedString(t){return W.revive(t)}};Xe=Rn([W.SerializableClass()],Xe);class Pn{inInstance;rowNodeCount;rowXOffset;varCount;clauseCount;height;yStep;yOffset;xDist=50;yDist=300;constructor(e){this.inInstance=e;const{variables:r,clauses:a}=this.inInstance;this.yOffset=this.yDist/2,this.varCount=r.length,this.clauseCount=a.length,this.height=(this.varCount-1)*this.yDist,this.yStep=(this.height-this.yDist)/(this.clauseCount-1==0?1:this.clauseCount-1),this.rowNodeCount=3*a.length+3,this.rowXOffset=(this.rowNodeCount-1)/2*this.xDist}reduce(){let e=[];const r=this.createVarGadgets();e.push(...r.interSteps);const a=this.createClauseGadgets(r.graph.copy());return e.push(...a.interSteps),{outInstance:a.graph,steps:e}}createClauseGadgets(e){const{clauses:r}=this.inInstance;let a=[],o=e.copy();return a.push({id:"create-clause-gadget-nodes",title:"Create clause nodes",description:`
                <p>
                    For every clause, create one clause node 
                    (this node must be visited exactly once).
                    There are ${this.clauseCount} clause nodes.
                </p>
                <p>
                    For each of the clause, create edges to or from the variable row nodes
                    based on these rules:
                </p>
                <ul>
                    <li>
                        If the literal <b>isn't negated</b>, 
                        pick a free (one that hasn't been used yet in this step) 
                        row node <i>r</i> and connect it to the clause node.

                        The selected node is an <u>out-going</u> node.

                        Then connect the clause node back to a row node <i>r + 1</i> 
                        (adjacent on the right of it).

                        This node is an <u>in-coming</u> node.
                    </li>
                    <li>
                        If the literal <b>is negated</b>, 
                        pick a free row node <i>r</i> 
                        and connect it to the clause node.

                        The selected node is an <u>out-going</u> node.

                        Then connect the clause node back to a row node <i>r - 1</i> 
                        (adjacent on the left of it).

                        This node is an <u>in-coming</u> node.
                    </li>
                </ul>
                <p>
                    This way we gaurantee for each clause that:
                    <ul>
                        <li>
                            If the literal <i>L</i> of some variable <i>X</i> 
                            <b>wasn't negated</b> in the clause, 
                            then we can reach it from an <i>X</i> variable row node 
                            and come back to an <i>X</i> variable row node on the right of it,
                            when we approach it from the left (we assinged X to be True).
                        </li>
                        <li>
                            If the literal <i>L</i> of some variable <i>X</i> 
                            <b>was negated</b> in the clause, 
                            then we can reach it from an <i>X</i> variable row node 
                            and come back to an <i>X</i> variable row node on the left of it,
                            when we approach it from the right (we assigned X to be False).
                        </li>
                    </ul>
                </p>
            `,inSnapshot:this.inInstance,outSnapshot:o,mapping:{}}),r.forEach((s,u)=>{const d=u+1,f=`${d}`,p={id:Le+`${f}`,position:{x:2*this.rowXOffset,y:u*this.yStep+this.yOffset},classes:"clause"};o.addNode(p),e.addNode(p),s.literals.forEach((_,C)=>{const T=`${_.varName}_${3*d}`,I=`${_.varName}_${3*d+1}`;_.negated?(e.addEdge({id:ae+`${I}-${f}`,from:Me+`${I}`,to:Le+`${f}`,classes:"false_out"}),e.addEdge({id:ae+`${f}-${T}`,from:Le+`${f}`,to:Me+`${T}`,classes:"false_in"})):(e.addEdge({id:ae+`${T}-${f}`,from:Me+`${T}`,to:Le+`${f}`,classes:"true_out"}),e.addEdge({id:ae+`${f}-${I}`,from:Le+`${f}`,to:Me+`${I}`,classes:"true_in"}))}),a.push({id:`connect-clause-node-${u}`,title:`Connect clause node "${f}" to variable row nodes`,description:`
                    <p>
                        Clause node "${f}" represents the clause ${s.asHtmlString()}.
                    </p>
                    <ul>
                        ${s.literals.map(_=>`
                                <li>
                                    ${_.asHtmlString()}
                                    &hyphen;
                                    ${_.negated?`
                                        because ${_.varName} is <i>negated</i>, 
                                        the <u>out-going</u> node (${_.varName}_${3*d+1})
                                        will be on the <b>right</b> of
                                        the <u>in-coming</u> node (${_.varName}_${3*d}).
                                    `:`
                                        because ${_.varName} is <i>isn't negated</i>, 
                                        the <u>out-going</u> node (${_.varName}_${3*d})
                                        will be on the <b>left</b> of
                                        the <u>in-coming</u> node (${_.varName}_${3*d+1}).
                                    `}
                                </li>
                            `).join("")}
                    </ul>
                    <p>
                        To clarify:
                        <ul>
                            <li>out-going node is incident to an edge connecting a row node to a clause node.</li>
                            <li>in-coming node is incident to an edge connecting a clause node to a row node.</li>
                        </ul>
                    </p>
                `,inSnapshot:this.inInstance,outSnapshot:e.copy(),mapping:{}})}),{graph:e,interSteps:a}}createVarGadgets(){const{variables:e}=this.inInstance;let r=new Xe,a=new Xe,o=[];return e.forEach((s,u)=>{if(u==0)a.addNode({id:we+Se,position:{x:0,y:u*this.yDist-this.yDist/2},classes:"source"}),a.addEdge({id:ae+`${Se}-${s}_1`,from:we+`${Se}`,to:Ee+`${s}_1`,classes:"muted"}),a.addEdge({id:ae+`${Se}-${s}_${this.rowNodeCount}`,from:we+`${Se}`,to:xe+`${s}_${this.rowNodeCount}`,classes:"muted"});else{const d=`${e[u-1]}_${s}`;a.addNode({id:Fe+`${d}`,position:{x:0,y:u*this.yDist-this.yDist/2},classes:"inbetween"});const f=e[u-1];a.addEdge({id:ae+`${f}_1-${d}`,from:Ee+`${f}_1`,to:Fe+d,classes:"muted"}),a.addEdge({id:ae+`${f}_${this.rowNodeCount}-${d}`,from:xe+`${f}_${this.rowNodeCount}`,to:Fe+d,classes:"muted"}),a.addEdge({id:ae+`${d}-${s}_1`,from:Fe+`${d}`,to:Ee+`${s}_1`,classes:"muted"}),a.addEdge({id:ae+`${d}-${s}_${this.rowNodeCount}`,from:Fe+`${d}`,to:xe+`${s}_${this.rowNodeCount}`,classes:"muted"})}for(let d=1;d<=this.rowNodeCount-1;d++){const f=`${s}_${d}`,p=`${s}_${d+1}`;let _="",C=Me,T=Me;d==1?(_+=" true",C=Ee):d==this.rowNodeCount-1?T=xe:(d+1)%3==0&&(_+=" guarantee");const I={id:C+`${f}`,position:{x:(d-1)*this.xDist-this.rowXOffset,y:u*this.yDist},classes:_};if(r.addNode(I),a.addNode(I),d==this.rowNodeCount-1){const O={id:T+`${p}`,position:{x:d*this.xDist-this.rowXOffset,y:u*this.yDist},classes:"false"};r.addNode(O),a.addNode(O)}const g={id:ae+`${f}-${p}`,from:C+`${f}`,to:T+`${p}`,classes:"muted"},S={id:ae+`${p}-${f}`,from:T+`${p}`,to:C+`${f}`,classes:"muted"};r.addEdge(g),r.addEdge(S),a.addEdge(g),a.addEdge(S)}u==e.length-1&&(a.addNode({id:we+Ie,position:{x:0,y:u*this.yDist+this.yDist/2},classes:"target"}),a.addEdge({id:ae+`${s}_1-${Ie}`,from:Ee+`${s}_1`,to:we+`${Ie}`,classes:"muted"}),a.addEdge({id:ae+`${s}_${this.rowNodeCount}-${Ie}`,from:xe+`${s}_${this.rowNodeCount}`,to:we+`${Ie}`,classes:"muted"}),a.addEdge({id:ae+`${Ie}-${Se}`,from:we+`${Ie}`,to:we+`${Se}`,classes:"muted"}))}),o.push({id:"create-variable-gadgets",title:"Create individual variable gadgets",description:`
                <p>
                    For every variable, create a row variable gadget.
                </p>
                <p>
                    This gadget consists of ${this.rowNodeCount} row nodes.
                    They are all connected birectinally.
                </p>
                <p>
                    The number of row nodes it derived as follows: 
                </p>
                <p>
                    For every clause we need 2 nodes - an <i>out-going</i> and <i>in-coming</i> node.
                    Each of these 2 nodes must be padded a <i>pad</i> node (at least one).
                    The rows themselves also need <i>true</i> and and <i>false</i> ends.
                </p>
                <p>
                    ${this.clauseCount==1?`There is ${this.clauseCount} clause.`:`There are ${this.clauseCount} clauses.`}
                    Therefore we need: 
                    <ul>
                        <li>2 * ${this.clauseCount} out-going and in-coming nodes</li>
                        <li>${this.clauseCount} + 1 pad nodes</li>
                        <li>1 true and 1 false nodes at the row ends</li>
                    </ul>
                </p>
                <p>
                    (2 * ${this.clauseCount}) + (${this.clauseCount} + 1) + 1 + 1 = ${this.rowNodeCount} nodes per variable row.
                </p>
            `,inSnapshot:this.inInstance,outSnapshot:r,mapping:{}}),o.push({id:"create-inbetween-nodes",title:"Create inbetween nodes",description:`
                <p>
                    Create the <i>source</i> node, the <i>inbetween</i> nodes that lie
                    between the variable rows and <i>target</i> node. 
                </p>
                <p>
                    Connect the <i>source</i> node 
                    to the row ends of the first variable "${this.inInstance.variables[0]}".
                    After that connect its row ends to the inbetween/target node below.
                    Finally connect the <i>target</i> node to <i>source</i> node to close the loop.
                </p>
                <p>Why did we do this?</p>
                <p>
                    Going from the <i>source</i> or an <i>inbetween</i> node 
                    to the variable's row node is equivalent to assigning 
                    a boolean value that corresponding variable.
                </p>
                <ul>
                    <li> 
                        Going through the <b>left edge means assigning 'true'</b>.
                    </li>
                    <li>
                        Going though the <b>right edge means assigning 'false'</b>.
                    </li>
                </ul>
                <p>
                    Notice that we can only choose either 'true' or 'false' edge.
                    Backtracking is impossible.
                </p>
                <p>
                    After going through either the right or left edge, 
                    we must visit the row nodes, for the final cycle to be Hamiltonian.
                </p>
                <ul>
                    <li>
                        If we chose the <b>left edge</b>, then we end up on the <b>'true'</b> node 
                        and have to traverse the row nodes from <u>left to right</u> until 
                        we end up at the 'false' node.
                    </li>

                    <li>
                        If we chose the <b>right</b> edge, then we end up on the <b>'false'</b> node 
                        and have to traverse the row nodes from <u>right to left</u> until
                        we end up at the 'true' node.
                    </li>

                    <li>
                        Onwards, the only choice is to continue 
                        to the next <i>inbetween</i>/<i>target</i> node below.
                    </li>
                </ul>
                <p>
                    The last step is to go from the <i>target</i> node back to the <i>source</i> node.
                </p>
            `,inSnapshot:this.inInstance,outSnapshot:a,mapping:{}}),{graph:a,interSteps:o}}}var Ln=Object.getOwnPropertyDescriptor,Fn=(t,e,r,a)=>{for(var o=a>1?void 0:a?Ln(e,r):e,s=t.length-1,u;s>=0;s--)(u=t[s])&&(o=u(o)||o);return o};let ft=class{inInstance=null;outInstance=null;steps=[];stepIndex=0;inCert=null;outCert=null;reset(){this.inInstance=null,this.outInstance=null,this.inCert=null,this.outCert=null,this.steps=[],this.stepIndex=0}resetStepIndex(){this.stepIndex=0}setInInstance(t){this.reset(),this.inInstance=t}set setSteps(t){this.steps=t,this.stepIndex=0}nextStep(){const t=this.steps.length;this.stepIndex=Math.min(this.stepIndex+1,t)}prevStep(){this.stepIndex=Math.max(this.stepIndex-1,0)}hasInstances(){return this.inInstance!=null&&this.outInstance!=null}};ft=Fn([W.SerializableClass()],ft);var Hn=B('<meta name="description" content="Redcution from 3SAT to HCYCLE"/>'),zn=(t,e)=>e(),Gn=B('<div class="loading svelte-1cz0gvf"><span class="spinner svelte-1cz0gvf"></span> <span> </span></div>'),Xn=B("<div><!></div> <!> <div><!></div>",1),Wn=B("<span>There are no steps to step through.</span>"),Un=B('<div class="panes svelte-1cz0gvf"><div><!> <!></div> <div><!> <!></div></div>'),jn=B('<section><h1>3SAT to HCYCLE reduction</h1> <!> <div><button>Reduce</button> <button><!></button> <input type="checkbox" name="showStepperCheckbox"/> <label for="showStepperCheckbox">Show steps</label></div> <!> <!></section>');function Kn(t,e){Oe(e,!0);const r=()=>Gr(u,"$redStore",a),[a,o]=Xr();let s=Tn(Ur.LS_3SAT_HCYCLE,new ft),u=s.value,d=be(!1),f=be(!1),p=be("");function _(b){u.update(k=>(k.reset(),k.setInInstance(b),s.save(),k))}function C(){if(r().inInstance){const b=new Pn(r().inInstance),{outInstance:k,steps:P}=b.reduce();u.update(X=>(X.steps=P,X.outInstance=k,X)),s.save()}}async function T(){let{inCert:b,outInstance:k,outCert:P}=r();if(!(!k||P)){ue(f,!0),ue(p,"Solving Hamiltonian cycle...");try{const X=new Worker(new URL(""+new URL("../workers/WorkerHCYCLESolver-DXa0ySKg.js",import.meta.url).href,import.meta.url),{type:"module"}),ne=new Promise(V=>{X.onmessage=le=>{X.terminate(),V(le.data)}});if(X.postMessage(k.toSerializedString()),P=await ne,P==ze)u.update(V=>(V.inCert=ze,V.outCert=ze,V));else{const V=k,le=P.path;V.edges.forEach(Y=>Y.classes+=" solved");const te=Y=>Y.slice(Y.search(Mn)+1);for(let Y=0;Y<le.length-1;Y++){const he=te(le[Y].id),ye=te(le[Y+1].id),me=ae+`${he}-${ye}`,v=V.edges.find(de=>de.id==me);v&&(V.removeEdge(v),v.classes+=" used",V.addEdge(v))}b=new An().decode(V,P),u.update(Y=>(Y.inCert=b,Y.outCert=P,Y.outInstance=V,Y))}s.save()}catch(X){console.error("Error during solving:",X),ue(p,"An error occured while solving.")}finally{ue(f,!1),ue(p,"")}}}vt(()=>{u.update(b=>(b.resetStepIndex(),b))});var I=jn();Pr(b=>{var k=Hn();Lr.title="3SAT to HCYCLE",F(b,k)});var g=H(L(I),2);mn(g,{get cnf(){return r().inInstance},onChange:b=>_(b),onWrongFormat:b=>alert("From editor: "+b)});var S=H(g,2),O=L(S);O.__click=C;var $=H(O,2);$.__click=[zn,T];var G=L($);{var J=b=>{var k=Tt("Solving...");F(b,k)},j=b=>{var k=Tt("Solve");F(b,k)};re(G,b=>{M(f)?b(J):b(j,!1)})}R($);var z=H($,2);Ze(z),Je(2),R(S);var x=H(S,2);{var A=b=>{var k=Gn(),P=H(L(k),2),X=L(P,!0);R(P),R(k),ge(()=>Ce(X,M(p))),F(b,k)};re(x,b=>{M(f)&&b(A)})}var U=H(x,2);{var se=b=>{const k=je(()=>r().steps),P=je(()=>r().stepIndex);var X=$e(),ne=_e(X);{var V=te=>{var Y=Xn(),he=_e(Y),ye=L(he);{var me=ie=>{Rt(ie,{get cnf(){return M(k)[M(P)].inSnapshot}})};re(ye,ie=>{M(P)<M(k).length&&M(k)[M(P)].inSnapshot&&!M(k)[M(P)].inSnapshot.empty()&&ie(me)})}R(he);var v=H(he,2);En(v,{get steps(){return r().steps},get stepIndex(){return r().stepIndex},onPrevClick:()=>{u.update(ie=>(ie.prevStep(),ie)),s.save()},onNextClick:()=>{u.update(ie=>(ie.nextStep(),ie)),s.save()}});var de=H(v,2),Ke=L(de);{var Z=ie=>{Lt(ie,{get graph(){return r().steps[r().stepIndex].outSnapshot},style:"3SAT-HCYCLE"})};re(Ke,ie=>{r().stepIndex<r().steps.length&&r().steps[r().stepIndex].outSnapshot&&ie(Z)})}R(de),F(te,Y)},le=te=>{var Y=Wn();F(te,Y)};re(ne,te=>{M(k).length?te(V):te(le,!1)})}F(b,X)},oe=b=>{var k=Un(),P=L(k),X=L(P);{var ne=v=>{Rt(v,{get cnf(){return r().inInstance}})};re(X,v=>{r().inInstance&&!r().inInstance.empty()&&v(ne)})}var V=H(X,2);{var le=v=>{rn(v,{get cert(){return r().inCert}})};re(V,v=>{r().inCert&&v(le)})}R(P);var te=H(P,2),Y=L(te);{var he=v=>{Lt(v,{get graph(){return r().outInstance},style:"3SAT-HCYCLE"})};re(Y,v=>{r().outInstance&&!r().outInstance.empty()&&v(he)})}var ye=H(Y,2);{var me=v=>{cn(v,{get cert(){return r().outCert}})};re(ye,v=>{r().outCert&&v(me)})}R(te),R(k),F(b,k)};re(U,b=>{M(d)?b(se):b(oe,!1)})}R(I),ge(b=>$.disabled=b,[()=>!r().hasInstances()||M(f)]),Qe(z,()=>M(d),b=>ue(d,b)),F(t,I),ke(),o()}pt(["click"]);export{Kn as component,Qn as universal};
