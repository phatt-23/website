import{V as Xe,i as D,j as ze,B as k,ae as He,X as Ue,Y as Ve,Z as he,w as j,_ as ee,m as q,C as qe,aS as Be,a1 as ue,a4 as Ge,a2 as H,aw as _e,a0 as Se,a8 as Je,au as pe,aP as we,aK as be,b0 as K,a5 as xe,a6 as We,b1 as Z,b2 as Ye,b3 as te,aE as Ce,n as $e,b4 as Ke,aO as Ze,b5 as Qe,k as je,y as et,b6 as Ne,q as tt,b7 as st,b8 as fe,g as at,a9 as nt,b9 as rt,ba as it,as as lt,u as Ae,h as Oe,bb as ot,p as ut,f as Q,d as C,s as F,A as ct,r as N,D as dt,t as se,E as ft,b as U,c as vt,ao as me,a as $,ap as ht}from"./D1gJg5gW.js";import"./DsnmJJEf.js";import{d as _t,s as ae,c as pt,o as mt,w as gt,g as ge}from"./kmNpuAZe.js";import{p as ne,i as re}from"./ntNUJhCQ.js";import{h as Ie}from"./TRjCXhQC.js";import{r as It}from"./DnhBb1Nf.js";function Et(e,t){return t}function yt(e,t,s){for(var a=e.items,n=[],r=t.length,i=0;i<r;i++)Ke(t[i].e,n,!0);var o=r>0&&n.length===0&&s!==null;if(o){var f=s.parentNode;Ze(f),f.append(s),a.clear(),L(e,t[0].prev,t[r-1].next)}Qe(n,()=>{for(var v=0;v<r;v++){var h=t[v];o||(a.delete(h.k),L(e,h.prev,h.next)),Ce(h.e,!o)}})}function St(e,t,s,a,n,r=null){var i=e,o={flags:t,items:new Map,first:null},f=(t&Ne)!==0;if(f){var v=e;i=D?j(et(v)):v.appendChild(Se())}D&&ze();var h=null,b=!1,x=new Map,R=He(()=>{var I=s();return be(I)?I:I==null?[]:we(I)}),u,_;function d(){wt(_,u,o,x,i,n,t,a,s),r!==null&&(u.length===0?h?xe(h):h=ue(()=>r(i)):h!==null&&We(h,()=>{h=null}))}Xe(()=>{_??=je,u=k(R);var I=u.length;if(b&&I===0)return;b=I===0;let y=!1;if(D){var A=Ue(i)===Ve;A!==(I===0)&&(i=he(),j(i),ee(!1),y=!0)}if(D){for(var E=null,m,l=0;l<I;l++){if(q.nodeType===qe&&q.data===Be){i=q,y=!0,ee(!1);break}var c=u[l],g=a(c,l);m=ce(q,o,E,null,c,g,l,n,t,s),o.items.set(g,m),E=m}I>0&&j(he())}if(D)I===0&&r&&(h=ue(()=>r(i)));else if(Ge()){var T=new Set,P=H;for(l=0;l<I;l+=1){c=u[l],g=a(c,l);var S=o.items.get(g)??x.get(g);S?(t&(Z|K))!==0&&De(S,c,l,t):(m=ce(null,o,null,null,c,g,l,n,t,s,!0),x.set(g,m)),T.add(g)}for(const[w,O]of o.items)T.has(w)||P.skipped_effects.add(O.e);P.add_callback(d)}else d();y&&ee(!0),k(R)}),D&&(i=q)}function wt(e,t,s,a,n,r,i,o,f){var v=(i&st)!==0,h=(i&(Z|K))!==0,b=t.length,x=s.items,R=s.first,u=R,_,d=null,I,y=[],A=[],E,m,l,c;if(v)for(c=0;c<b;c+=1)E=t[c],m=o(E,c),l=x.get(m),l!==void 0&&(l.a?.measure(),(I??=new Set).add(l));for(c=0;c<b;c+=1){if(E=t[c],m=o(E,c),l=x.get(m),l===void 0){var g=a.get(m);if(g!==void 0){a.delete(m),x.set(m,g);var T=d?d.next:u;L(s,d,g),L(s,g,T),ie(g,T,n),d=g}else{var P=u?u.e.nodes_start:n;d=ce(P,s,d,d===null?s.first:d.next,E,m,c,r,i,f)}x.set(m,d),y=[],A=[],u=d.next;continue}if(h&&De(l,E,c,i),(l.e.f&te)!==0&&(xe(l.e),v&&(l.a?.unfix(),(I??=new Set).delete(l))),l!==u){if(_!==void 0&&_.has(l)){if(y.length<A.length){var S=A[0],w;d=S.prev;var O=y[0],X=y[y.length-1];for(w=0;w<y.length;w+=1)ie(y[w],S,n);for(w=0;w<A.length;w+=1)_.delete(A[w]);L(s,O.prev,X.next),L(s,d,O),L(s,X,S),u=S,d=X,c-=1,y=[],A=[]}else _.delete(l),ie(l,u,n),L(s,l.prev,l.next),L(s,l,d===null?s.first:d.next),L(s,d,l),d=l;continue}for(y=[],A=[];u!==null&&u.k!==m;)(u.e.f&te)===0&&(_??=new Set).add(u),A.push(u),u=u.next;if(u===null)continue;l=u}y.push(l),d=l,u=l.next}if(u!==null||_!==void 0){for(var z=_===void 0?[]:we(_);u!==null;)(u.e.f&te)===0&&z.push(u),u=u.next;var Y=z.length;if(Y>0){var Me=(i&Ne)!==0&&b===0?n:null;if(v){for(c=0;c<Y;c+=1)z[c].a?.measure();for(c=0;c<Y;c+=1)z[c].a?.fix()}yt(s,z,Me)}}v&&tt(()=>{if(I!==void 0)for(l of I)l.a?.apply()}),e.first=s.first&&s.first.e,e.last=d&&d.e;for(var ke of a.values())Ce(ke.e);a.clear()}function De(e,t,s,a){(a&Z)!==0&&_e(e.v,t),(a&K)!==0?_e(e.i,s):e.i=s}function ce(e,t,s,a,n,r,i,o,f,v,h){var b=(f&Z)!==0,x=(f&Ye)===0,R=b?x?Je(n,!1,!1):pe(n):n,u=(f&K)===0?i:pe(i),_={i:u,v:R,k:r,a:null,e:null,prev:s,next:a};try{if(e===null){var d=document.createDocumentFragment();d.append(e=Se())}return _.e=ue(()=>o(e,R,u,v),D),_.e.prev=s&&s.e,_.e.next=a&&a.e,s===null?h||(t.first=_):(s.next=_,s.e.next=_.e),a!==null&&(a.prev=_,a.e.prev=_.e),_}finally{}}function ie(e,t,s){for(var a=e.next?e.next.e.nodes_start:s,n=t?t.e.nodes_start:s,r=e.e.nodes_start;r!==null&&r!==a;){var i=$e(r);n.before(r),r=i}}function L(e,t,s){t===null?e.first=s:(t.next=s,t.e.next=s&&s.e),s!==null&&(s.prev=t,s.e.prev=t&&t.e)}function Re(e){var t,s,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(s=Re(e[t]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function bt(){for(var e,t,s=0,a="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=Re(e))&&(a&&(a+=" "),a+=t);return a}function Yt(e){return typeof e=="object"?bt(e):e??""}const Ee=[...` 	
\r\fÂ \v\uFEFF`];function $t(e,t,s){var a=e==null?"":""+e;if(t&&(a=a?a+" "+t:t),s){for(var n in s)if(s[n])a=a?a+" "+n:n;else if(a.length)for(var r=n.length,i=0;(i=a.indexOf(n,i))>=0;){var o=i+r;(i===0||Ee.includes(a[i-1]))&&(o===a.length||Ee.includes(a[o]))?a=(i===0?"":a.substring(0,i))+a.substring(o+1):i=o}}return a===""?null:a}function xt(e,t){return e==null?null:String(e)}function Ct(e,t,s,a){var n=e.__style;if(D||n!==t){var r=xt(t);(!D||r!==e.getAttribute("style"))&&(r==null?e.removeAttribute("style"):e.style.cssText=r),e.__style=t}return a}function Te(e,t,s=!1){if(e.multiple){if(t==null)return;if(!be(t))return rt();for(var a of e.options)a.selected=t.includes(B(a));return}for(a of e.options){var n=B(a);if(it(n,t)){a.selected=!0;return}}(!s||t!==void 0)&&(e.selectedIndex=-1)}function Nt(e){var t=new MutationObserver(()=>{Te(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),nt(()=>{t.disconnect()})}function Kt(e,t,s=t){var a=!0;fe(e,"change",n=>{var r=n?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(r),B);else{var o=e.querySelector(r)??e.querySelector("option:not([disabled])");i=o&&B(o)}s(i)}),at(()=>{var n=t();if(Te(e,n,a),a&&n===void 0){var r=e.querySelector(":checked");r!==null&&(n=B(r),s(n))}e.__value=n,a=!1}),Nt(e)}function B(e){return"__value"in e?e.__value:e.value}function Zt(e,t,s=t){var a=new WeakSet;fe(e,"input",async n=>{var r=n?e.defaultValue:e.value;if(r=le(e)?oe(r):r,s(r),H!==null&&a.add(H),await lt(),r!==(r=t())){var i=e.selectionStart,o=e.selectionEnd;e.value=r??"",o!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(o,e.value.length))}}),(D&&e.defaultValue!==e.value||Ae(t)==null&&e.value)&&(s(le(e)?oe(e.value):e.value),H!==null&&a.add(H)),Oe(()=>{var n=t();if(e===document.activeElement){var r=ot??H;if(a.has(r))return}le(e)&&n===oe(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function At(e,t,s=t){fe(e,"change",a=>{var n=a?e.defaultChecked:e.checked;s(n)}),(D&&e.defaultChecked!==e.checked||Ae(t)==null)&&s(e.checked),Oe(()=>{var a=t();e.checked=!!a})}function le(e){var t=e.type;return t==="number"||t==="range"}function oe(e){return e===""?null:+e}const Qt="unsolvable";class Ot extends Error{}function Pe(e,t){if(!e)throw new Ot("[ASSERT] "+t)}function Le(e,t,s){return s.indexOf(e)===t}class p{static SerializableClass(t){return function(s){const a=t??s.name;s.prototype.__type=a,p.registerClass(a,s)}}static serialize(t){if(t==null)return t;if(Array.isArray(t))return t.map(p.serialize);if(t instanceof Set)return{__type:"Set",values:Array.from(t).map(p.serialize)};if(t instanceof Map)return{__type:"Map",entries:Array.from(t.entries()).map(([s,a])=>[p.serialize(s),p.serialize(a)])};if(typeof t=="object"){if(Array.isArray(t))return t.map(p.serialize);const s=t.constructor,n={__type:t.__type??s.name};for(const[r,i]of Object.entries(t))n[r]=p.serialize(i);return n}return t}static revive(t){if(t==null)return t;if(Array.isArray(t))return t.map(p.revive);if(t.__type==="Set")return new Set(t.values.map(p.revive));if(t.__type==="Map")return new Map(t.entries.map(([s,a])=>[p.revive(s),p.revive(a)]));if(t.__type){const s=p.getClass(t.__type);if(!s)throw new Error(`Serializer - Unknown class: ${t.__type}`);const a=Object.create(s.prototype);for(const[n,r]of Object.entries(t))n!=="__type"&&(a[n]=p.revive(r));return a}return t}static registerClass(t,s){p.classRegistry.set(t,s)}static getClass(t){return p.classRegistry.get(t)}static classRegistry=new Map}p.registerClass(Object.name,Object);class Fe{}var Dt=Object.getOwnPropertyDescriptor,ve=(e,t,s,a)=>{for(var n=a>1?void 0:a?Dt(t,s):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(n=i(n)||n);return n};let G=class{id;varName;negated;constructor(e,t,s=!1){this.id=e,this.varName=t,this.negated=s}toJson(){return{__type:G.name,id:this.id,varName:this.varName,negated:this.negated}}asString(){return`${this.negated?"!":""}${this.varName}`}asHtmlString(){return(this.negated?"&not;":"")+this.varName}};G=ve([p.SerializableClass("Literal")],G);let J=class{id;literals;constructor(e,t){Pe(t.length==3),this.id=e,this.literals=[t[0],t[1],t[2]]}asString(){return this.literals.map(e=>e.asString()).join(" ")}asHtmlString(){return"("+this.literals.map(t=>t.asHtmlString()).join("&or;")+")"}toJSON(){return{__type:J.name,id:this.id,literals:this.literals}}};J=ve([p.SerializableClass("Clause")],J);let W=class extends Fe{_variables=new Set;_clauses=new Set;addVariable(e){this._variables.add(e)}addClause(e){this._clauses.add(e),e.literals.forEach(t=>this.addVariable(t.varName))}asString(){return Array.from(this._clauses.values()).map(e=>e.asString()).join(`
`)}asHtmlString(){return this.clauses.map(e=>e.asHtmlString()).join("&and;")}get variables(){return Array.from(this._variables.values())}get clauses(){return Array.from(this._clauses.values())}empty(){const e=this.clauses.length==0||this.variables.length==0;return console.debug("empty",e),e}static fromString(e){const t=e.split(`
`).map(a=>a.trim()).filter(a=>a.length).filter(Le);let s=new W;for(let a=0;a<t.length;a++){const n=t[a],r=n.split(" ").map(f=>f.trim()).filter(f=>f.length);if(r.length!=3)return`Clause number ${a+1} (${n}) doesn't have exactly 3 literals. Instead it has ${r.length} literals.`;let i=[];for(let f=0;f<r.length;f++){let v=r[f];const h=v.startsWith("!");if(h&&(v=v.replace("!","")),v.includes("!")||v.includes("||")||v.includes("&&"))return`Literal ${h?"!":""}${v} is invalid.`;const b=new G(`v:${f}-c:${a}`,v,h);i.push(b)}Pe(i.length==3);const o=new J(`c:${a}`,i);s.addClause(o)}return s}copy(){const e=new W;return this._variables.forEach(t=>e.addVariable(t)),this._clauses.forEach(t=>{const s=t.literals.map(n=>new G(n.id,n.varName,n.negated)),a=new J(t.id,s);e.addClause(a)}),e}};W=ve([p.SerializableClass("CNF3")],W);const jt=":",M="n:",es="n%:",Rt="e:",ts="source",ss="target",as="n%c:",ns="n%i:",rs="n%t:",is="n%f:",ls="_in",os="_gap",us="_out",cs="T:",ds="F:",fs="filler1:",vs="filler2:";var Tt=Object.getOwnPropertyDescriptor,Pt=(e,t,s,a)=>{for(var n=a>1?void 0:a?Tt(t,s):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(n=i(n)||n);return n};let V=class extends Fe{_nodes;_edges;constructor(){super(),this._nodes=new Set,this._edges=new Set}addNode(e){e.classes==null&&(e.classes=""),!this.nodes.find(t=>t.id==e.id)&&this._nodes.add(e)}addEdge(e){e.classes==null&&(e.classes=""),!this.edges.find(t=>t.id==e.id)&&this._edges.add(e)}get nodes(){return Array.from(this._nodes.values())}get edges(){return Array.from(this._edges.values())}removeNode(e){if(!this._nodes.has(e))return;this._nodes.delete(e),Array.from(this.edges).filter(s=>s.to===e.id||s.from===e.id).forEach(s=>this._edges.delete(s))}removeEdge(e){this._edges.delete(e)}empty(){return this.nodes.length==0}copy(){const e=new V;for(const t of this._nodes)e.addNode({id:t.id,label:t.label,position:t.position?{...t.position}:void 0,classes:t.classes});for(const t of this._edges)e.addEdge({id:t.id,from:t.from,to:t.to,weight:t.weight,classes:t.classes});return e}asString(){const e=this.nodes.map(s=>s.id.slice(M.length)).join(`
`),t=this.edges.map(s=>s.from.slice(M.length)+" "+s.to.slice(M.length)+(s.weight!=null?" "+s.weight:"")).join(`
`);return e+`
`+t+`
`}static fromString(e){if(e.length==0)return"Cannot construct a graph from empty string";const t=e.split(`
`).map(a=>a.trim()).filter(a=>a.length).filter(Le);let s=new V;console.debug("LINES",t);for(let a=0;a<t.length;a++){const r=t[a].split(" ").map(i=>i.trim()).filter(i=>i.length);if(r.length==1){const i=r;s.addNode({id:M+i})}else if(r.length<=3){const i=r[0],o=r[1];let f;if(r.length==3)try{f=Number.parseFloat(r[2])}catch{return`On the line ${a}, couldn't parse the weight: '${r[2]}Please enter a number (floating allowed)`}s.addNode({id:M+i}),s.addNode({id:M+o}),s.addEdge({id:Rt+`${i}-${o}`,from:M+i,to:M+o,weight:f})}}return s}toSerializedString(e=!1){const t={nodes:this.nodes.map(s=>({id:s.id,label:s.label??null,position:s.position??null,classes:s.classes??""})),edges:this.edges.map(s=>({id:s.id,from:s.from,to:s.to,weight:s.weight??null,classes:s.classes??""}))};return JSON.stringify(t,null,e?2:0)}static fromSerializedString(e){const t=JSON.parse(e),s=new V;if(Array.isArray(t.nodes))for(const a of t.nodes)s.addNode({id:a.id,label:a.label??void 0,position:a.position??void 0,classes:a.classes??""});if(Array.isArray(t.edges))for(const a of t.edges)s.addEdge({id:a.id,from:a.from,to:a.to,weight:a.weight??void 0,classes:a.classes??""});return s}};V=Pt([p.SerializableClass()],V);class de{static cnf3TextInput={NO_SOLUTION:`x y z
!x y z
x !y z
!x !y z
x y !z
!x y !z
x !y !z
!x !y !z
`,BASIC:`x y z
a b c
`};static graphTextInput={CYCLE:`0 1
1 2
2 3
3 4
4 0
`,PATH:`0 1
1 2
2 3
3 4
`,COMPLETE:`0 1
1 2
2 3
3 4
0 2
0 3
0 4
1 3
1 4
2 4
`};static getTextInputs(t){if(t===W)return de.cnf3TextInput;if(t===V)return de.graphTextInput;throw new Error(`No demos provided for class ${t.name}.`)}}function Lt(e,t,s){t()&&s.stepIndex>0&&t()()}function Ft(e,t,s,a){t()&&s.stepIndex<a-1&&t()()}var Mt=Q("<h3> </h3> <p><!></p> <!>",1),kt=Q("<h3> </h3> <p><!></p>",1),Xt=Q('<section><div class="header svelte-bomf3d"><h2>Reduction Stepper</h2> <div class="controls"><div><input type="checkbox" name="showAllCheckbox"/> <label for="showAllCheckbox">Show all</label></div> <div><button>Previous</button> <button>Next</button> <span> </span></div></div></div> <!></section>');function hs(e,t){ut(t,!0);let s=ne(t,"indent",3,0),a=ne(t,"onNextClick",3,void 0),n=ne(t,"onPrevClick",3,void 0);const r=t.steps.length;let i=dt(!1);var o=Xt(),f=C(o),v=F(C(f),2),h=C(v),b=C(h);It(b),ct(2),N(h);var x=F(h,2),R=C(x);R.__click=[Lt,n,t];var u=F(R,2);u.__click=[Ft,a,t,r];var _=F(u,2),d=C(_);N(_),N(x),N(v),N(f);var I=F(f,2);{var y=E=>{var m=me(),l=$(m);St(l,17,()=>t.steps,Et,(c,g,T)=>{var P=Mt(),S=$(P),w=C(S);N(S);var O=F(S,2),X=C(O);Ie(X,()=>k(g).description),N(O);var z=F(O,2);re(z,Y=>{}),se(()=>ae(w,`Step #${T+1}: ${k(g).title??""}`)),U(c,P)}),U(E,m)},A=E=>{var m=me(),l=$(m);{var c=g=>{const T=ht(()=>t.steps[t.stepIndex]);var P=kt(),S=$(P),w=C(S);N(S);var O=F(S,2),X=C(O);Ie(X,()=>k(T).description),N(O),se(()=>ae(w,`Step #${t.stepIndex+1}: ${k(T).title??""}`)),U(g,P)};re(l,g=>{t.stepIndex<t.steps.length&&g(c)})}U(E,m)};re(I,E=>{k(i)?E(y):E(A,!1)})}N(o),se(()=>{Ct(o,`padding-left: ${s()*100}px; border: solid black 1px`),ae(d,`${t.stepIndex+1}/${r??""}`)}),At(b,()=>k(i),E=>ft(i,E)),U(e,o),vt()}_t(["click"]);var zt=Q('<main><div class="loading svelte-nrcxd8"><span class="spinner svelte-nrcxd8"></span> <span><!></span></div></main>');function _s(e,t){var s=zt(),a=C(s),n=F(C(a),2),r=C(n);pt(r,()=>t.children),N(n),N(a),N(s),U(e,s)}function ps(e,t,s={serialize:a=>p.serialize(a),revive:a=>p.revive(a)}){let a=gt(t);mt(()=>{const r=localStorage.getItem(e);if(r){const i=s.revive(JSON.parse(r));a.set(i)}});const n=()=>{if(ge(a)){const r=JSON.stringify(s.serialize(ge(a)));localStorage.setItem(e,r)}else localStorage.removeItem(e)};return{value:a,save:()=>n()}}var Ht=Object.getOwnPropertyDescriptor,Ut=(e,t,s,a)=>{for(var n=a>1?void 0:a?Ht(t,s):t,r=e.length-1,i;r>=0;r--)(i=e[r])&&(n=i(n)||n);return n};let ye=class{inInstance=null;outInstance=null;steps=[];stepIndex=0;inCert=null;outCert=null;reset(){this.inInstance=null,this.outInstance=null,this.inCert=null,this.outCert=null,this.steps=[],this.stepIndex=0}resetStepIndex(){this.stepIndex=0}setInInstance(e){this.reset(),this.inInstance=e}setOutInstance(e){this.outInstance=e}setSteps(e){this.steps=e,this.stepIndex=0}nextStep(){const e=this.steps.length;this.stepIndex=Math.min(this.stepIndex+1,e)}prevStep(){this.stepIndex=Math.max(this.stepIndex-1,0)}hasInstances(){return this.inInstance!=null&&this.outInstance!=null}hasInInstance(){return this.inInstance!=null}hasOutInstance(){return this.outInstance!=null}hasInCertificate(){return this.inCert!=null}hasOutCertificate(){return this.outCert!=null}};ye=Ut([p.SerializableClass("ReductionStore")],ye);export{W as C,de as D,Rt as E,V as G,ls as N,jt as P,ye as R,p as S,ss as T,Qt as U,cs as V,Zt as a,At as b,Kt as c,os as d,St as e,us as f,M as g,_s as h,Et as i,hs as j,rs as k,is as l,as as m,es as n,ts as o,ns as p,Yt as q,ds as r,Fe as s,$t as t,ps as u,fs as v,vs as w};
