import"./DsnmJJEf.js";import{o as H}from"./xh0yEfGp.js";import{p as U,g as T,k as v,O as F,f as G,s as _,d as i,r as g,M as O,Q,b as Y,c as Z}from"./CTrBG-su.js";import{r as q}from"./Dw-FwYao.js";import{c as J,k as K}from"./QFfqNP4o.js";import{p as u,b as D}from"./0-nxEys-.js";import{c as V}from"./DtBltrT8.js";const c={selector:"node.selected-node",style:{"background-color":"#ff0000"}},n=[{selector:"edge.solved",style:{"line-opacity":.4}},{selector:"edge.solved.used",style:{"line-opacity":1}}],R={DEFAULT:[{selector:"node",style:{label:"data(id)","text-valign":"top",color:"#000","background-color":"#61bffc","text-outline-color":"#fff","text-outline-width":2,"border-color":"black","border-style":"solid","border-width":2}},{selector:"edge",style:{"curve-style":"bezier","line-color":"black",width:2}},...n,c],"3SAT-HCYCLE":[{selector:"node",style:{"font-size":12,"text-valign":"top","background-color":"blue","border-color":"black","border-style":"solid","border-width":2}},{selector:"node.true",style:{"background-color":"green"}},{selector:"node.false",style:{"background-color":"red"}},{selector:"node.source, node.inbetween, node.target",style:{"background-color":"white","border-style":"solid","border-color":"black"}},{selector:"node.clause",style:{"background-color":"orange"}},{selector:"node.guarantee",style:{opacity:.5}},{selector:"edge",style:{"line-color":"black","target-arrow-color":"black","target-arrow-shape":"chevron","curve-style":"bezier","arrow-scale":1}},{selector:"edge.muted",style:{"line-opacity":.2,"line-color":"black"}},{selector:"edge.clause",style:{"curve-style":"bezier",width:3,"line-opacity":1,"arrow-scale":2}},{selector:"edge.true_in",style:{"target-arrow-color":"green","line-color":"green","line-style":"dashed"}},{selector:"edge.true_out",style:{"target-arrow-color":"green","line-color":"green"}},{selector:"edge.false_in",style:{"target-arrow-color":"red","line-color":"red","line-style":"dashed"}},{selector:"edge.false_out",style:{"target-arrow-color":"red","line-color":"red"}},{selector:"edge.target-to-source",style:{"curve-style":"round-segments","segment-distances":"data(controlPointDistances)","segment-weights":[0,1]}},...n,c],UNDIRECTED:[{selector:"node",style:{"text-valign":"top",color:"#000","background-color":"#61bffc","text-outline-color":"#fff","text-outline-width":2,"border-color":"black","border-style":"solid","border-width":2}},{selector:"edge",style:{"curve-style":"bezier","line-color":"black",width:2}},...n,c],DIRECTED:[{selector:"node",style:{"text-valign":"top",color:"#000","background-color":"#61bffc","text-outline-color":"#fff","text-outline-width":2,"border-color":"black","border-style":"solid","border-width":2}},{selector:"edge",style:{"line-color":"black","target-arrow-shape":"triangle","target-arrow-color":"black","curve-style":"bezier","arrow-scale":2,width:2}},...n,c],HCIRCUIT:[{selector:"node",style:{"text-valign":"top",color:"#000","background-color":"#61bffc","text-outline-color":"#fff","text-outline-width":2,"border-color":"black","border-style":"solid","border-width":2}},{selector:"edge",style:{"curve-style":"bezier","line-color":"black","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4",width:2}},{selector:"edge.solid",style:{opacity:1,"line-opacity":1}},{selector:"edge.muted",style:{opacity:.4,"line-opacity":.4}},...n,c],TSP:[{selector:"node",style:{"text-valign":"top",color:"#000","background-color":"#61bffc","text-outline-color":"#fff","text-outline-width":2,"border-color":"black","border-style":"solid","border-width":2}},{selector:"edge",style:{label:"data(weight)","curve-style":"bezier","line-color":"black","text-background-color":"#fff","text-background-opacity":1,"text-background-padding":"4",width:2}},{selector:"edge.solid",style:{opacity:1,"line-opacity":1}},{selector:"edge.muted",style:{opacity:.4,"line-opacity":.4}},...n,c],"3SAT-3CG":[{selector:"node",style:{"font-size":12,"text-valign":"top","background-color":"white","border-color":"black","border-style":"solid","border-width":2}},{selector:"edge.muted",style:{"line-opacity":.2,"line-color":"black"}},{selector:"node.green, node.T",style:{"background-color":"green"}},{selector:"node.red, node.F",style:{"background-color":"red"}},{selector:"node.blue, node.B",style:{"background-color":"blue"}},{selector:"edge.core",style:{"curve-style":"bezier","line-color":"black",width:1}},{selector:"edge.outer-circle",style:{"curve-style":"unbundled-bezier","control-point-distances":"data(controlPointDistances)","control-point-weights":[.25,.75],width:8}},...n,c]};var W=G('<main class="svelte-ovjh18"><h2 class="dev">Graph Renderer</h2> <div class="graph-wrapper svelte-ovjh18"><div id="cy" class="svelte-ovjh18"><div id="math-label-layer" class="svelte-ovjh18"></div></div> <div class="actions svelte-ovjh18"><label class="checkbox-wrapper"><input type="checkbox"/> Move Enabled</label></div></div></main>');function se(P,s){U(s,!0);let m=u(s,"style",3,"DEFAULT"),j=u(s,"layout",3,"preset"),L=u(s,"onNodeTap",3,()=>{}),M=u(s,"onEdgeTap",3,()=>{}),e,p,a,b=F(!1);const d=new Map;function f(o){e.panningEnabled(o),e.userZoomingEnabled(o),o?e.nodes().grabify():e.nodes().ungrabify()}function k(){console.debug("label.length",Array.from(d.entries()).length),console.debug("render"),e.nodes().forEach(o=>{const r=o.data("label");if(!r)return;let t=d.get(r);if(!t){console.debug("creating svg"),t=document.createElement("div"),t.style.position="absolute";const B=K.renderToString(r);t.innerHTML=B,d.set(r,t),a.append(t)}const l=t.getBoundingClientRect(),C=o.renderedPosition();o.renderedBoundingbox();const N=e.zoom();t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.transformOrigin="0 0",t.style.transform=`
                translate(${C.x}px, ${C.y}px)
                translate(${-l.width/2}px, ${-l.height/2}px)
                scale(${N})
            `})}function S(){console.debug("resize"),a&&(a.style.width=e.width()+"px",a.style.height=e.height()+"px")}function A(o){const r=o.target.id(),t=d.get(r);t&&(t.remove(),d.delete(r))}H(()=>{e=V({container:p,wheelSensitivity:5,style:R[m()]}),e.on("tap","node",L()),e.on("tap","edge",M()),e.on("resize",S),e.on("remove","node",o=>A(o)),e.on("render",k)}),T(()=>{const o=s.graph.nodes.map(l=>({data:{id:l.id,label:l.label??l.id},position:l.position,classes:l.classes})),r=s.graph.edges.map(l=>({data:{id:l.id,source:l.from,target:l.to,weight:l.weight,controlPointDistances:l.controlPointDistances},classes:l.classes}));e.elements().remove(),e.add([...o,...r]),e.style(R[m()]);let t=e.layout({name:j()});t.pon("layoutstop").then(()=>{console.debug("layoutstop"),f(!0),e.resize(),e.reset(),e.fit(e.elements(),20),f(v(b)),k()}),t.run(),d.forEach(l=>l.style.display="none")}),T(()=>f(v(b)));var h=W(),w=_(i(h),2),y=i(w),I=i(y);D(I,o=>a=o,()=>a),g(y),D(y,o=>p=o,()=>p);var x=_(y,2),z=i(x),E=i(z);q(E),O(),g(z),g(x),g(w),g(h),J(E,()=>v(b),o=>Q(b,o)),Y(P,h),Z()}export{se as R};
